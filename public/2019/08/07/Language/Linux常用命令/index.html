<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Linux常用命令"><meta name="keywords" content="Linux"><meta name="author" content="WangXun"><meta name="copyright" content="WangXun"><title>Linux常用命令 | Wake</title><link rel="shortcut icon" href="/img/favicon-blank.svg"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"HSM2EINL2X","apiKey":"6f1478b12150efd917d5ecfcddfb8b8b","indexName":"wangxun","hits":{"per_page":10},"languages":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}.","hits_stats":"${hits} results found in ${time} ms"}},
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '6.0.0'
} </script><meta name="generator" content="Hexo 6.0.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">1.</span> <span class="toc-text">文件操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%A4%B9-x2F-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">1.1.</span> <span class="toc-text">文件夹&#x2F;文件操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#find%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE"><span class="toc-number">1.2.</span> <span class="toc-text">find文件查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E6%9B%BF%E6%8D%A2xargs"><span class="toc-number">1.3.</span> <span class="toc-text">参数替换xargs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E9%93%BE%E6%8E%A5%E8%BD%AF%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.4.</span> <span class="toc-text">硬链接软连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.5.</span> <span class="toc-text">重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E6%88%96%E5%88%A0%E9%99%A4%E5%AD%97%E7%AC%A6tr"><span class="toc-number">1.6.</span> <span class="toc-text">转换或删除字符tr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDwget"><span class="toc-number">1.7.</span> <span class="toc-text">下载wget</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E7%BC%A9"><span class="toc-number">1.8.</span> <span class="toc-text">压缩和解压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#gzip-gunzip"><span class="toc-number">1.8.1.</span> <span class="toc-text">gzip gunzip</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bzip2-bunzip2"><span class="toc-number">1.8.2.</span> <span class="toc-text">bzip2 bunzip2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zip-unzip"><span class="toc-number">1.8.3.</span> <span class="toc-text">zip unzip</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tar"><span class="toc-number">1.8.4.</span> <span class="toc-text">tar</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%87%E5%89%B2%E6%96%87%E4%BB%B6split"><span class="toc-number">1.9.</span> <span class="toc-text">切割文件split</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84"><span class="toc-number">2.</span> <span class="toc-text">用户和用户组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.1.</span> <span class="toc-text">主要配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7%E5%91%BD%E4%BB%A4"><span class="toc-number">2.2.</span> <span class="toc-text">管理用户命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#useradd%E6%96%B0%E5%A2%9E%E7%94%A8%E6%88%B7"><span class="toc-number">2.2.1.</span> <span class="toc-text">useradd新增用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#usermod%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%B1%9E%E6%80%A7"><span class="toc-number">2.2.2.</span> <span class="toc-text">usermod修改用户属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#passwd%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81"><span class="toc-number">2.2.3.</span> <span class="toc-text">passwd修改用户密码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="toc-number">2.2.4.</span> <span class="toc-text">其他命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7%E7%BB%84%E5%91%BD%E4%BB%A4"><span class="toc-number">2.3.</span> <span class="toc-text">管理用户组命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="toc-number">2.4.</span> <span class="toc-text">文件权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ACL%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.5.</span> <span class="toc-text">ACL设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">文件处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#VIM"><span class="toc-number">3.1.</span> <span class="toc-text">VIM</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E5%8F%B7"><span class="toc-number">3.1.1.</span> <span class="toc-text">行号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%BD%E7%95%A5%E5%AD%97%E7%AC%A6%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99"><span class="toc-number">3.1.2.</span> <span class="toc-text">忽略字符的大小写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E7%BC%A9%E8%BF%9B"><span class="toc-number">3.1.3.</span> <span class="toc-text">自动缩进</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E4%BF%9D%E7%95%99%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.1.4.</span> <span class="toc-text">复制保留格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%BE%E7%A4%BATab-I%E5%92%8C%E6%8D%A2%E8%A1%8C%E7%AC%A6%E5%92%8C-%E6%98%BE%E7%A4%BA"><span class="toc-number">3.1.5.</span> <span class="toc-text">显示Tab ^I和换行符和$显示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AB%98%E4%BA%AE%E6%90%9C%E7%B4%A2"><span class="toc-number">3.1.6.</span> <span class="toc-text">高亮搜索</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE"><span class="toc-number">3.1.7.</span> <span class="toc-text">语法高亮</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.1.8.</span> <span class="toc-text">文件格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Tab%E7%94%A8%E7%A9%BA%E6%A0%BC%E4%BB%A3%E6%9B%BF"><span class="toc-number">3.1.9.</span> <span class="toc-text">Tab用空格代替</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Tab%E7%94%A8%E6%8C%87%E5%AE%9A%E7%A9%BA%E6%A0%BC%E7%9A%84%E4%B8%AA%E6%95%B0%E4%BB%A3%E6%9B%BF"><span class="toc-number">3.1.10.</span> <span class="toc-text">Tab用指定空格的个数代替</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%BC%A9%E8%BF%9B%E5%AE%BD%E5%BA%A6"><span class="toc-number">3.1.11.</span> <span class="toc-text">设置缩进宽度</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%96%87%E6%9C%AC%E5%AE%BD%E5%BA%A6"><span class="toc-number">3.1.11.1.</span> <span class="toc-text">设置文本宽度</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%85%89%E6%A0%87%E6%89%80%E5%9C%A8%E8%A1%8C%E7%9A%84%E6%A0%87%E8%AF%86%E7%BA%BF"><span class="toc-number">3.1.12.</span> <span class="toc-text">设置光标所在行的标识线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E5%AF%86"><span class="toc-number">3.1.13.</span> <span class="toc-text">加密</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E8%AF%8D%E9%97%B4%E8%B7%B3%E8%BD%AC"><span class="toc-number">3.1.14.</span> <span class="toc-text">单词间跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BD%93%E5%89%8D%E9%A1%B5%E8%B7%B3%E8%BD%AC"><span class="toc-number">3.1.15.</span> <span class="toc-text">当前页跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E9%A6%96%E8%A1%8C%E5%B0%BE%E8%B7%B3%E8%BD%AC"><span class="toc-number">3.1.16.</span> <span class="toc-text">行首行尾跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E9%97%B4%E7%A7%BB%E5%8A%A8"><span class="toc-number">3.1.17.</span> <span class="toc-text">行间移动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BF%BB%E9%A1%B5"><span class="toc-number">3.1.18.</span> <span class="toc-text">翻页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%BC%96%E8%BE%91"><span class="toc-number">3.1.19.</span> <span class="toc-text">字符编辑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E5%91%BD%E4%BB%A4"><span class="toc-number">3.1.20.</span> <span class="toc-text">替换命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%91%BD%E4%BB%A4"><span class="toc-number">3.1.21.</span> <span class="toc-text">删除命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E5%91%BD%E4%BB%A4"><span class="toc-number">3.1.22.</span> <span class="toc-text">复制命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B2%98%E8%B4%B4%E5%91%BD%E4%BB%A4"><span class="toc-number">3.1.23.</span> <span class="toc-text">粘贴命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE"><span class="toc-number">3.1.24.</span> <span class="toc-text">查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%92%A4%E9%94%80%E6%9B%B4%E6%94%B9"><span class="toc-number">3.1.25.</span> <span class="toc-text">撤销更改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E6%96%87%E4%BB%B6%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.1.26.</span> <span class="toc-text">多文件模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E6%96%87%E4%BB%B6%E5%88%86%E5%89%B2"><span class="toc-number">3.1.27.</span> <span class="toc-text">多文件分割</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E6%96%87%E4%BB%B6%E7%AA%97%E5%8F%A3%E5%88%86%E5%89%B2"><span class="toc-number">3.1.28.</span> <span class="toc-text">单文件窗口分割</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E6%9F%A5%E7%9C%8B"><span class="toc-number">3.2.</span> <span class="toc-text">文本查看</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cat"><span class="toc-number">3.2.1.</span> <span class="toc-text">cat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#head"><span class="toc-number">3.2.2.</span> <span class="toc-text">head</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tail"><span class="toc-number">3.2.3.</span> <span class="toc-text">tail</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#more-less"><span class="toc-number">3.2.4.</span> <span class="toc-text">more less</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E5%88%86%E5%89%B2%E5%90%88%E5%B9%B6"><span class="toc-number">3.3.</span> <span class="toc-text">文本分割合并</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cut"><span class="toc-number">3.3.1.</span> <span class="toc-text">cut</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#paste"><span class="toc-number">3.3.2.</span> <span class="toc-text">paste</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E6%96%87%E6%9C%AC"><span class="toc-number">3.4.</span> <span class="toc-text">分析文本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#wc"><span class="toc-number">3.4.1.</span> <span class="toc-text">wc</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sort"><span class="toc-number">3.4.2.</span> <span class="toc-text">sort</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#uniq"><span class="toc-number">3.4.3.</span> <span class="toc-text">uniq</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#diff-patch"><span class="toc-number">3.4.4.</span> <span class="toc-text">diff patch</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8Dgrep"><span class="toc-number">3.5.</span> <span class="toc-text">文本模式匹配grep</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%8C%E7%BC%96%E8%BE%91%E5%99%A8sed"><span class="toc-number">3.6.</span> <span class="toc-text">行编辑器sed</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#option"><span class="toc-number">3.6.1.</span> <span class="toc-text">option</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#script"><span class="toc-number">3.6.2.</span> <span class="toc-text">script</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4"><span class="toc-number">3.6.3.</span> <span class="toc-text">命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E6%9B%BF%E6%8D%A2"><span class="toc-number">3.6.4.</span> <span class="toc-text">查找替换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AWK%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="toc-number">3.7.</span> <span class="toc-text">AWK文本处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#awk%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">3.7.1.</span> <span class="toc-text">awk工作过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#print"><span class="toc-number">3.7.2.</span> <span class="toc-text">print</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">3.7.3.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#printf"><span class="toc-number">3.7.4.</span> <span class="toc-text">printf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">3.7.5.</span> <span class="toc-text">操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="toc-number">3.7.6.</span> <span class="toc-text">模式匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%92%8C%E5%BE%AA%E7%8E%AF"><span class="toc-number">3.7.7.</span> <span class="toc-text">条件和循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">3.7.8.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk%E5%87%BD%E6%95%B0"><span class="toc-number">3.7.9.</span> <span class="toc-text">awk函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">软件包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%85%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-number">4.1.</span> <span class="toc-text">包的依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%A8%8B%E5%BA%8F%E5%8C%85"><span class="toc-number">4.2.</span> <span class="toc-text">获取程序包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RPM%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">4.3.</span> <span class="toc-text">RPM包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">4.3.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E5%92%8C%E9%99%8D%E7%BA%A7"><span class="toc-number">4.3.2.</span> <span class="toc-text">升级和降级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.3.3.</span> <span class="toc-text">包查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E5%8D%B8%E8%BD%BD"><span class="toc-number">4.3.4.</span> <span class="toc-text">包卸载</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yum%E5%92%8Cdnf"><span class="toc-number">4.4.</span> <span class="toc-text">yum和dnf</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#yum%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.4.1.</span> <span class="toc-text">yum配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#yum-config-manager"><span class="toc-number">4.4.2.</span> <span class="toc-text">yum-config-manager</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#yum%E5%91%BD%E4%BB%A4"><span class="toc-number">4.4.3.</span> <span class="toc-text">yum命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dnf"><span class="toc-number">4.4.4.</span> <span class="toc-text">dnf</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E5%8C%85%E7%BC%96%E8%AF%91"><span class="toc-number">5.</span> <span class="toc-text">程序包编译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B"><span class="toc-number">5.1.</span> <span class="toc-text">C语言编译过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E5%87%86%E5%A4%87"><span class="toc-number">5.2.</span> <span class="toc-text">编译安装准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="toc-number">5.3.</span> <span class="toc-text">编译安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85httpd"><span class="toc-number">5.4.</span> <span class="toc-text">编译安装httpd</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ubuntu%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">Ubuntu软件管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dpkg%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">6.1.</span> <span class="toc-text">dpkg包管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#apt"><span class="toc-number">6.2.</span> <span class="toc-text">apt</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.jpg"></div><div class="author-info__name text-center">WangXun</div><div class="author-info__description text-center"></div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/w749">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">71</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">20</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">6</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/top-img.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Wake</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">Linux常用命令</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-07</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Language/">Language</a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">11.5k</span><span class="post-meta__separator">|</span><span>Reading time: 45 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>Linux常用操作命令。</p>
<span id="more"></span>


<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><h3 id="文件夹-x2F-文件操作"><a href="#文件夹-x2F-文件操作" class="headerlink" title="文件夹&#x2F;文件操作"></a>文件夹&#x2F;文件操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建文件夹</span></span><br><span class="line"><span class="built_in">mkdir</span> 文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除文件夹/文件：</span></span><br><span class="line"><span class="built_in">rm</span> -rf 文件名/文件</span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动文件夹/文件：</span></span><br><span class="line"><span class="built_in">mv</span> 原路径 新路径（也可用于修改文件名）</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制文件夹/文件：</span></span><br><span class="line"><span class="built_in">cp</span> 原路径 新路径</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示文件内容（英文全拼：concatenate）命令用于连接文件并打印到标准输出设备上：</span></span><br><span class="line"><span class="built_in">cat</span> 文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分页查看文件，操作命令和vim基本相同</span></span><br><span class="line">less 文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看文件状态</span></span><br><span class="line"><span class="built_in">stat</span> 文件夹</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置文件所有者：（将当前前目录下的所有文件与子目录的拥有者皆设为 runoob，群体的使用者 runoobgroup）；</span></span><br><span class="line"><span class="built_in">chown</span> -R runoob:runoobgroup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看文件权限：</span></span><br><span class="line"><span class="built_in">ls</span> -ld 文件名称</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改用户对文件的权限：（用数字来表示权限）三个数字分别表示User、Group、及Other的权限。r=4，w=2，x=1</span></span><br><span class="line"><span class="comment"># 若要 rwx 属性则 4+2+1=7</span></span><br><span class="line"><span class="comment"># 若要 rw- 属性则 4+2=6</span></span><br><span class="line"><span class="comment"># 若要 r-x 属性则 4+1=5</span></span><br><span class="line"><span class="built_in">chmod</span> 777 file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 远程复制：scp 是 linux 系统下基于 ssh 登陆进行安全的远程文件拷贝命令。（同一局域网或者与远程服务器）</span></span><br><span class="line"><span class="comment"># 若是复制到目标主机的同目录下，则目标主机后的地址写$PWD</span></span><br><span class="line">scp local_file remote_username@remote_ip:remote_folder；</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加环境变量：</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="comment"># 在结尾添加export PATH=&quot;$PATH:/home/software/cmake-3.19.0-Linux-x86_64/bin&quot;</span></span><br><span class="line"><span class="comment"># esc + :wq保存退出</span></span><br><span class="line"><span class="comment"># 使配置生效</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>

<h3 id="find文件查找"><a href="#find文件查找" class="headerlink" title="find文件查找"></a>find文件查找</h3><ul>
<li>-maxdepth level 最大搜索目录深度</li>
<li>-mindepth level 最小搜索目录深度</li>
<li>-depth 先处理目录下的文件再处理目录本身</li>
<li>-name 文件名称 根据文件名查找，支持通配符，使用时要用引号括起来</li>
<li>-iname 文件名称 不区分大小写</li>
<li>-regex PATTERN 以PATTERN匹配整个文件路径，而非文件名称</li>
<li>-user USERNAME 查找属主为指定用户的文件</li>
<li>-group GROUPNAME 查找属组为指定组的文件</li>
<li>-uid UserID 查找属主为指定UID的文件</li>
<li>-gid GroupID 查找属组为指定GID的文件</li>
<li>-nouser 查找没有属主的文件</li>
<li>-nogroup 查找没有属组的文件</li>
<li>-type TYPE 根据文件类型查找（f普通文件、d目录文件、l符号链接文件、s套接字文件、b块设备文件、c字符设备文件、p管道文件）</li>
<li>-empty 空文件或目录</li>
<li>-a 与，默认多个条件就是与关系</li>
<li>-o 或</li>
<li>-not 非，或者使用!</li>
<li>-prune 排除目录</li>
<li>-size [+|-]UNIT 根据文件大小查找，常用大小k、M、G、c；6k表示(5k,6k]，-6k表示[0,5k]，+6k表示(6k,∞)</li>
<li>-mtime [+|-] DAY 根据修改或创建时间查找文件，单位为天</li>
<li>-mmin [+|-] MINUTE 根据分钟查找文件</li>
<li>-perm MODE 根据权限查找</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">find /etc -maxdepth 2 mindepth 2</span><br><span class="line">find -regex <span class="string">&quot;.*\.txt$&quot;</span>  <span class="comment"># 查找.txt结尾</span></span><br><span class="line">find -maxdepth 1 -name <span class="string">&quot;*.md&quot;</span>  <span class="comment"># 查找当前目录下.md结尾</span></span><br><span class="line">find /home -<span class="built_in">type</span> d -<span class="built_in">ls</span>  <span class="comment"># 查看/home下的所有目录</span></span><br><span class="line">find /home -<span class="built_in">type</span> d -empty  <span class="comment"># 查找空文件或目录</span></span><br><span class="line">find /etc -<span class="built_in">type</span> d -o -<span class="built_in">type</span> l | <span class="built_in">wc</span> -l  <span class="comment"># 或者</span></span><br><span class="line">find /etc -path <span class="string">&#x27;/etc/security&#x27;</span> -a -prune -o -name <span class="string">&quot;*.conf&quot;</span>  <span class="comment"># 排除目录</span></span><br><span class="line">find / \( -path <span class="string">&quot;/sys&quot;</span> -o -path <span class="string">&quot;/proc&quot;</span> \) -a -prune -o -<span class="built_in">type</span> f -a -mmin -1  <span class="comment"># 排除/proc和/sys目录</span></span><br><span class="line">find /var/log/ -mtime +3 -<span class="built_in">type</span> f -<span class="built_in">print</span>  <span class="comment"># 查找三天前被改动的文件</span></span><br><span class="line">find /var/log/ -mtime -3 -<span class="built_in">type</span> f -<span class="built_in">print</span>  <span class="comment"># 查找三天内被改动的文件</span></span><br><span class="line">find /var/log/ -mtime 3 -<span class="built_in">type</span> f -<span class="built_in">print</span>  <span class="comment"># 查找第三天被改动的文件</span></span><br><span class="line">find -name <span class="string">&quot;*.md&quot;</span> -newermt <span class="string">&#x27;2022-09-02&#x27;</span> ! -newermt <span class="string">&#x27;2022-09-06&#x27;</span>  <span class="comment"># 查找一段时间内的文件</span></span><br><span class="line">find -mmin -1  <span class="comment"># 查找一分钟内被改动的文件</span></span><br><span class="line">find -maxdepth 1 -perm 644  <span class="comment"># 查找当前目录下权限为644的文件</span></span><br></pre></td></tr></table></figure>

<h3 id="参数替换xargs"><a href="#参数替换xargs" class="headerlink" title="参数替换xargs"></a>参数替换xargs</h3><p>由于很多命令不支持管道|来传递参数，xargs用于产生某个命令的参数，xargs 可以读入 stdin 的数据，并且以空格符或回车符将 stdin 的数据分隔成为参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">seq</span> 10 | xargs</span><br><span class="line"><span class="built_in">ls</span> <span class="string">&quot;*.log&quot;</span> | xargs <span class="built_in">rm</span> -rf  <span class="comment"># 删除当前目录下的指定文件，谨慎使用</span></span><br><span class="line">find /bin/ -perm /7000 | xargs <span class="built_in">ls</span> -Sl  <span class="comment"># 查找有特殊权限的文件并排序</span></span><br></pre></td></tr></table></figure>

<h3 id="硬链接软连接"><a href="#硬链接软连接" class="headerlink" title="硬链接软连接"></a>硬链接软连接</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ln创建链接</span></span><br><span class="line"><span class="built_in">ln</span> test1 test2  <span class="comment"># 默认建立硬链接，两个文件同步，删除一个另外一个照样存在</span></span><br><span class="line"><span class="built_in">ln</span> -s test1 test3  <span class="comment"># 加s参数创建软链接，两个文件同步，删除test1后test3也不可访问</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对于不允许创建硬链接的文件也可使用cp -l命令也可达到创建硬链接的效果</span></span><br><span class="line"><span class="built_in">cp</span> -rl /var/lib/docker/volumes/wordpress_db/_data/* ./db</span><br></pre></td></tr></table></figure>

<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将命令执行后在控制台打印的结果和错误重定向到黑洞，全扔掉</span></span><br><span class="line"><span class="built_in">ls</span> 1&gt; /dev/null  <span class="comment"># 1表示控制台打印的结果，2表示错误信息</span></span><br><span class="line"><span class="built_in">ls</span> &gt; /dev/null 2&gt;&amp;1  <span class="comment"># 简写，将所有结果都重定向到黑洞</span></span><br><span class="line"><span class="built_in">ls</span> &gt; /dev/null 2&gt;&amp;1 &amp;  <span class="comment"># 让程序后台执行，不会阻塞控制台</span></span><br><span class="line"><span class="built_in">ls</span> &gt;&gt; tmp.log 2&gt;&amp;1 &amp;  <span class="comment"># 将结果打印到日志文件</span></span><br><span class="line"><span class="built_in">ls</span> &gt;&gt; stdout.log 2&gt; stderr.log  <span class="comment"># 分别重定向</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多行重定向，将多行结果写入文件</span></span><br><span class="line"><span class="built_in">cat</span> &gt; <span class="built_in">test</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">        This is line 1 of the message.</span></span><br><span class="line"><span class="string">        This is line 2 of the message.</span></span><br><span class="line"><span class="string">        This is line 3 of the message.</span></span><br><span class="line"><span class="string">        This is line 4 of the message.</span></span><br><span class="line"><span class="string">        This is the last line of the message.</span></span><br><span class="line"><span class="string">       </span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重定向中的-</span></span><br><span class="line">wget -O - http://www.wangxiaochun.com/testdir/hello.sh  <span class="comment"># 不加-符号会把这个文件下载到当前文件夹，但是加上-会作为stdout输出</span></span><br><span class="line">tar -cvf - /home | tar -xvf -  <span class="comment"># 将/home下的文件打包，但不是打包到文件而是打包到stdout通过管道符传给后面的命令，后面的-则用来接收管道符前的stdout</span></span><br></pre></td></tr></table></figure>

<h3 id="转换或删除字符tr"><a href="#转换或删除字符tr" class="headerlink" title="转换或删除字符tr"></a>转换或删除字符tr</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tr</span> <span class="string">&#x27;a-z&#x27;</span> <span class="string">&#x27;A-Z&#x27;</span> &lt; /etc/issue  <span class="comment"># 该命令会把/etc/issue中的小写字符都转换成大写字符</span></span><br><span class="line"><span class="built_in">tr</span> –d abc &lt; /etc/fstab  <span class="comment"># 删除fstab文件中的所有abc中任意字符</span></span><br><span class="line"><span class="built_in">tr</span> -s <span class="string">&#x27;-&#x27;</span> <span class="string">&#x27;,&#x27;</span> &lt; <span class="built_in">test</span>  <span class="comment"># 将连续的-字符替换为一个单独的,字符，类似于去重后替换</span></span><br><span class="line"><span class="built_in">tr</span> -d <span class="string">&#x27;-&#x27;</span> &lt; <span class="built_in">test</span>  <span class="comment"># 删除所有的-字符</span></span><br><span class="line"><span class="built_in">tr</span> -d <span class="string">&#x27;\r&#x27;</span> &lt; windows.txt &gt; windows2.txt  <span class="comment"># 将 Windows 的文本转化 Linux的文本格式</span></span><br></pre></td></tr></table></figure>

<h3 id="下载wget"><a href="#下载wget" class="headerlink" title="下载wget"></a>下载wget</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget http://cn.wordpress.org/wordpress-3.1-zh_CN.zip  <span class="comment"># 下载文件保存到当前目录</span></span><br><span class="line">wget -O wordpress.zip http://www.centos.bz/download.php?<span class="built_in">id</span>=1080  <span class="comment"># 下载资源并保存到wordpress.zip</span></span><br><span class="line">wget -c http://cn.wordpress.org/wordpress-3.1-zh_CN.zip  <span class="comment"># 断点续传</span></span><br><span class="line">wget -b http://cn.wordpress.org/wordpress-3.1-zh_CN.zip  <span class="comment"># 后台下载</span></span><br><span class="line">wget –tries=40 http://cn.wordpress.org/wordpress-3.1-zh_CN.zip  <span class="comment"># 失败最大重试</span></span><br><span class="line">wget -i list.txt  <span class="comment"># 下载多个文件，list.txt保存多个链接</span></span><br><span class="line">wget –ftp-user=USERNAME –ftp-password=PASSWORD url  <span class="comment"># 使用wget用户名和密码认证的ftp下载</span></span><br></pre></td></tr></table></figure>

<h3 id="压缩和解压缩"><a href="#压缩和解压缩" class="headerlink" title="压缩和解压缩"></a>压缩和解压缩</h3><h4 id="gzip-gunzip"><a href="#gzip-gunzip" class="headerlink" title="gzip gunzip"></a>gzip gunzip</h4><p>gzip [OPTION]… FILE …</p>
<ul>
<li>-k keep，保留原文件，Centos8</li>
<li>-d 解压缩，相当于gunzip</li>
<li>-c 结果输出至标准输出，保留原文件</li>
<li>-# 指定压缩比，取值为1-9</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gunzip file.gz  <span class="comment"># 解压文件</span></span><br><span class="line">zcat file.gz  <span class="comment"># 不显式解压提前查看文件内容</span></span><br><span class="line">gzip -c messages &gt; messages.gz</span><br><span class="line">gzip -c -d messages.gz &gt; messages</span><br><span class="line">zcat messages.gz &gt; messages</span><br><span class="line"><span class="built_in">cat</span> messages | gzip &gt; m.gz</span><br></pre></td></tr></table></figure>

<h4 id="bzip2-bunzip2"><a href="#bzip2-bunzip2" class="headerlink" title="bzip2 bunzip2"></a>bzip2 bunzip2</h4><p>bzip2 [OPTION]… FILE …</p>
<ul>
<li>-k keep，保留原文件</li>
<li>-d 解压缩</li>
<li>-c 结果输出至标准输出，保留原文件</li>
<li>-# 指定压缩比，取值为1-9</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bunzip2 file.bz2  <span class="comment"># 解压缩</span></span><br><span class="line">bzcat file.bz2  <span class="comment"># 不显式解压提前查看文件内容</span></span><br></pre></td></tr></table></figure>

<h4 id="zip-unzip"><a href="#zip-unzip" class="headerlink" title="zip unzip"></a>zip unzip</h4><p>zip 可以实现打包目录和多个文件成一个文件并压缩，但可能会丢失文件属性信息，如：所有者和组信息，一般建议使用 tar 代替</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zip  -r sysconfig.zip /etc/sysconfig/  <span class="comment"># 打包并压缩</span></span><br><span class="line">unzip sysconfig.zip  <span class="comment"># 解压</span></span><br><span class="line">unzip sysconfig.zip -d /tmp/config  <span class="comment"># 解压缩至指定目录,如果指定目录不存在，会在其父目录（必须事先存在）下自动生成</span></span><br></pre></td></tr></table></figure>

<h4 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h4><p>涉及参数太多，仅列举常用的操作</p>
<ul>
<li>-z 相当于gzip压缩工具</li>
<li>-j 相当于bzip2压缩工具</li>
<li>-J 相当于xz压缩工具</li>
<li>–exclude 排除文件<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tar -cpvf /PATH/FILE.tar FILE...  <span class="comment">#  创建归档，保留权限</span></span><br><span class="line">tar -rf /PATH/FILE.tar FILE...  <span class="comment"># 追加文件至归档： 注：不支持对压缩文件追加</span></span><br><span class="line">tar -t -f /PATH/FILE.tar  <span class="comment"># 查看归档文件中的文件列表</span></span><br><span class="line">tar zcvf /root/a.tgz  --exclude=/app/host1 --exclude=/app/host2 /app</span><br><span class="line">tar zxvf test.tar.gz  <span class="comment"># 解压</span></span><br><span class="line">tar zxvf test.tar.gz -C /tmp  <span class="comment"># 解压到指定目录</span></span><br><span class="line">tar zcvf test.tar.gz <span class="built_in">test</span>/ <span class="comment"># 压缩</span></span><br><span class="line">tar -xvf mysql-8.0.22-1.el8.x86_64.rpm-bundle.tar  <span class="comment"># 解压tar文件</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="切割文件split"><a href="#切割文件split" class="headerlink" title="切割文件split"></a>切割文件split</h3><p>将一个文件分割为数个</p>
<ul>
<li>-行数 指定多少行切分为一个小文件</li>
<li>-b字节 指定多少字节切分为一个小文件</li>
<li>-C字节 与-b相似，但是在切分时尽量维持每行的完整性</li>
<li>[输出文件名] 设置切割后的文件名前缀<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">split</span> -6 <span class="built_in">test</span>  <span class="comment"># 按行数切割</span></span><br><span class="line"><span class="built_in">split</span> -C1024 <span class="built_in">test</span> prefix-  <span class="comment"># 指定前缀</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="用户和用户组"><a href="#用户和用户组" class="headerlink" title="用户和用户组"></a>用户和用户组</h2><h3 id="主要配置文件"><a href="#主要配置文件" class="headerlink" title="主要配置文件"></a>主要配置文件</h3><ul>
<li>&#x2F;etc&#x2F;passwd：用户及其属性信息(名称、UID、主组ID等）</li>
<li>&#x2F;etc&#x2F;shadow：用户密码及其相关属性</li>
<li>&#x2F;etc&#x2F;group：组及其属性信息</li>
<li>&#x2F;etc&#x2F;gshadow：组密码及其相关属性</li>
</ul>
<h3 id="管理用户命令"><a href="#管理用户命令" class="headerlink" title="管理用户命令"></a>管理用户命令</h3><h4 id="useradd新增用户"><a href="#useradd新增用户" class="headerlink" title="useradd新增用户"></a>useradd新增用户</h4><ul>
<li>-u UID </li>
<li>-o 配合-u 选项，不检查UID的唯一性</li>
<li>-g GID 指明用户所属基本组，可为组名，也可以GID</li>
<li>-c “COMMENT“ 用户的注释信息</li>
<li>-d HOME_DIR 以指定的路径(不存在)为家目录</li>
<li>-s SHELL 指明用户的默认shell程序，可用列表在&#x2F;etc&#x2F;shells文件中</li>
<li>-G GROUP1[,GROUP2,…] 为用户指明附加组，组须事先存在</li>
<li>-N 不创建私用组做主组，使用users组做主组</li>
<li>-r 创建系统用户 CentOS 6之前: ID&lt;500，CentOS7 以后: ID&lt;1000</li>
<li>-m 创建家目录，用于系统用户</li>
<li>-M 不创建家目录，用于非系统用户</li>
<li>-p 指定加密的密码</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -r -u 48 -g apache -s /sbin/nologin -d /var/www -c <span class="string">&quot;Apache&quot;</span> apache</span><br></pre></td></tr></table></figure>

<h4 id="usermod修改用户属性"><a href="#usermod修改用户属性" class="headerlink" title="usermod修改用户属性"></a>usermod修改用户属性</h4><ul>
<li>-u UID: 新UID</li>
<li>-g GID: 新主组</li>
<li>-G GROUP1[,GROUP2,…[,GROUPN]]]：新附加组，原来的附加组将会被覆盖；若保留原有，则要同时使用-a选项</li>
<li>-s SHELL：新的默认SHELL</li>
<li>-c ‘COMMENT’：新的注释信息</li>
<li>-d HOME: 新家目录不会自动创建；若要创建新家目录并移动原家数据，同时使用-m选项</li>
<li>-l login_name: 新的名字</li>
<li>-L: lock指定用户,在&#x2F;etc&#x2F;shadow 密码栏的增加 ! </li>
<li>-U: unlock指定用户,将 &#x2F;etc&#x2F;shadow 密码栏的 ! 拿掉</li>
<li>-e YYYY-MM-DD: 指明用户账号过期日期</li>
<li>-f INACTIVE: 设定非活动期限，即宽限期</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -d /home/hnlinux root  <span class="comment"># 修改用户登录目录</span></span><br></pre></td></tr></table></figure>

<h4 id="passwd修改用户密码"><a href="#passwd修改用户密码" class="headerlink" title="passwd修改用户密码"></a>passwd修改用户密码</h4><ul>
<li>-d：删除指定用户密码</li>
<li>-l：锁定指定用户</li>
<li>-u：解锁指定用户</li>
<li>-e：强制用户下次登录修改密码</li>
<li>-f：强制操作</li>
<li>-n mindays：指定最短使用期限</li>
<li>-x maxdays：最大使用期限</li>
<li>-w warndays：提前多少天开始警告</li>
<li>-i inactivedays：非活动期限</li>
<li>–stdin：从标准输入接收用户密码,Ubuntu无此选项<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">passwd  <span class="comment"># 修改当前用户密码</span></span><br><span class="line"><span class="built_in">echo</span> 123456 | passwd <span class="built_in">test</span> --stdin  <span class="comment"># 给指定用户设置密码，注意debian没有stdin参数</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># userdel删除linux用户</span></span><br><span class="line">userdel -rf <span class="built_in">test</span>  <span class="comment"># r表示强制删除，f表示删除家目录和邮箱</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># id可以查看用户的ID信息</span></span><br><span class="line"><span class="built_in">id</span> root</span><br><span class="line"></span><br><span class="line"><span class="comment"># su切换用户</span></span><br><span class="line">su - hdfs  <span class="comment"># 切换到hdfs用户</span></span><br><span class="line">su - hdfs -c <span class="string">&quot;ls ~&quot;</span>  <span class="comment"># 使用指定的用户执行命令，但不切换用户</span></span><br></pre></td></tr></table></figure>

<h3 id="管理用户组命令"><a href="#管理用户组命令" class="headerlink" title="管理用户组命令"></a>管理用户组命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># groupadd创建组</span></span><br><span class="line">groupadd <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># groupmod修改组名称</span></span><br><span class="line">groupmod -n newtest <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># groupdel删除组</span></span><br><span class="line">groupdel -f <span class="built_in">test</span>  <span class="comment"># 强制删除，即使是用户的主组也强制删除组,但会导致无主组的用户不可用无法登录</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># gpasswd，可以修改组密码也可以修改组的成员关系</span></span><br><span class="line"><span class="comment"># -a user 将user添加至指定组中</span></span><br><span class="line"><span class="comment"># -d user 从指定附加组中移除用户user</span></span><br><span class="line"><span class="comment"># -A user1,user2,... 设置有管理权限的用户列表</span></span><br><span class="line">gpasswd -a wang admins  <span class="comment"># 将wang用户加入admins组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># groupmems 可以管理附加组的成员关系</span></span><br><span class="line"><span class="comment"># -g, --group groupname   #更改为指定组 (只有root)</span></span><br><span class="line"><span class="comment"># -a, --add username     #指定用户加入组</span></span><br><span class="line"><span class="comment"># -d, --delete username #从组中删除用户</span></span><br><span class="line"><span class="comment"># -p, --purge               #从组中清除所有成员</span></span><br><span class="line"><span class="comment"># -l,  --list                 #显示组成员列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># groups查看用户组关系</span></span><br><span class="line"><span class="built_in">groups</span> root</span><br></pre></td></tr></table></figure>

<h3 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h3><p>每个文件针对三类访问者有三种不同的权限：</p>
<p>三类访问者分别是：文件所有用户，用户所有组和其他用户；三种权限分别是读、写和执行，对应的三个字母是r、w、x，对应的数字分别是4、2、1。给文件分配权限可以按照不同权限的组合相加分配给不同的访问者，比如777就是三类访问者都可以读写和执行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置文件的所有者chown</span></span><br><span class="line"><span class="comment"># chown [OPTION]... [OWNER][:[GROUP]] FILE...</span></span><br><span class="line"><span class="comment"># chown [OPTION]... --reference=RFILE FILE...</span></span><br><span class="line"><span class="comment"># OWNER   #只修改所有者</span></span><br><span class="line"><span class="comment"># OWNER:GROUP #同时修改所有者和属组</span></span><br><span class="line"><span class="comment"># :GROUP   #只修改属组，冒号也可用 . 替换</span></span><br><span class="line"><span class="comment"># --reference=RFILE  #参考指定的的属性，来修改   </span></span><br><span class="line"><span class="comment"># -R #递归修改</span></span><br><span class="line"><span class="built_in">chown</span> -R <span class="built_in">test</span>:<span class="built_in">test</span> /root/tmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置文件的属组信息chgrp</span></span><br><span class="line"><span class="built_in">chgrp</span> <span class="built_in">test</span> /root/tmp  <span class="comment"># chgrp只可以修改文件的所属组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改文件权限chmod</span></span><br><span class="line"><span class="built_in">chmod</span> -R 755 /root/tmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设定文件特殊权限</span></span><br><span class="line">chattr +i file  <span class="comment"># 不能删除、改名、更改</span></span><br><span class="line">chattr +a file  <span class="comment"># 只能追加，不能删除、改名</span></span><br><span class="line">lsattr  <span class="comment"># 显示特殊属性</span></span><br></pre></td></tr></table></figure>

<h3 id="ACL设置"><a href="#ACL设置" class="headerlink" title="ACL设置"></a>ACL设置</h3><p>setfacl设定ACL权限</p>
<ul>
<li>-m：设定 ACL 权限。如果是给予用户 ACL 权限，则使用”u:用户名：权限”格式赋予；如果是给予组 ACL 权限，则使用”g:组名：权限” 格式赋予；</li>
<li>-x：删除指定的 ACL 权限；</li>
<li>-b：删除所有的 ACL 权限；</li>
<li>-d：设定默认 ACL 权限。只对目录生效，指目录中新建立的文件拥有此默认权限；</li>
<li>-k：删除默认 ACL 权限；</li>
<li>-R：递归设定 ACL 权限。指设定的 ACL 权限会对目录下的所有子文件生效；<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m u:<span class="built_in">test</span>:rx /root/tmp  <span class="comment"># 给test用户设置tmp目录的ACL权限</span></span><br><span class="line">setfacl -m g:tgroup2:rwx /root/tmp  <span class="comment"># 给用户组分配ACL权限</span></span><br><span class="line">setfacl -m d:u:<span class="built_in">test</span>:rw /root/tmp/  <span class="comment"># 给目录设置默认权限，这样目录内的新建文件也拥有ACL权限</span></span><br><span class="line">setfacl -x u:<span class="built_in">test</span> /root/tmp  <span class="comment"># 删除指定用户的ACL权限</span></span><br><span class="line">setfacl -b /root/tmp  <span class="comment"># 删除所有的ACL权限</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># getfacl获取文件的ACL权限</span></span><br><span class="line">getfacl /root/tmp</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h2><h3 id="VIM"><a href="#VIM" class="headerlink" title="VIM"></a>VIM</h3><h4 id="行号"><a href="#行号" class="headerlink" title="行号"></a>行号</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">显示：<span class="built_in">set</span> number，简写 <span class="built_in">set</span> nu</span><br><span class="line">取消显示：<span class="built_in">set</span> nonumber, 简写 <span class="built_in">set</span> nonu</span><br></pre></td></tr></table></figure>

<h4 id="忽略字符的大小写"><a href="#忽略字符的大小写" class="headerlink" title="忽略字符的大小写"></a>忽略字符的大小写</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> ignorecase，简写 <span class="built_in">set</span> ic</span><br><span class="line">不忽略：<span class="built_in">set</span> noic</span><br></pre></td></tr></table></figure>

<h4 id="自动缩进"><a href="#自动缩进" class="headerlink" title="自动缩进"></a>自动缩进</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> autoindent，简写 <span class="built_in">set</span> ai</span><br><span class="line">禁用：<span class="built_in">set</span> noai</span><br></pre></td></tr></table></figure>

<h4 id="复制保留格式"><a href="#复制保留格式" class="headerlink" title="复制保留格式"></a>复制保留格式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> <span class="built_in">paste</span></span><br><span class="line">禁用：<span class="built_in">set</span> nopaste</span><br></pre></td></tr></table></figure>

<h4 id="显示Tab-I和换行符和-显示"><a href="#显示Tab-I和换行符和-显示" class="headerlink" title="显示Tab ^I和换行符和$显示"></a>显示Tab ^I和换行符和$显示</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> list</span><br><span class="line">禁用：<span class="built_in">set</span> nolist</span><br></pre></td></tr></table></figure>
<h4 id="高亮搜索"><a href="#高亮搜索" class="headerlink" title="高亮搜索"></a>高亮搜索</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> hlsearch</span><br><span class="line">禁用：<span class="built_in">set</span> nohlsearch 简写：nohl</span><br></pre></td></tr></table></figure>

<h4 id="语法高亮"><a href="#语法高亮" class="headerlink" title="语法高亮"></a>语法高亮</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：syntax on</span><br><span class="line">禁用：syntax off</span><br></pre></td></tr></table></figure>

<h4 id="文件格式"><a href="#文件格式" class="headerlink" title="文件格式"></a>文件格式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">启用windows格式：<span class="built_in">set</span> fileformat=dos</span><br><span class="line">启用unix格式：<span class="built_in">set</span> fileformat=unix</span><br><span class="line">简写 <span class="built_in">set</span> ff=dos|unix</span><br></pre></td></tr></table></figure>

<h4 id="Tab用空格代替"><a href="#Tab用空格代替" class="headerlink" title="Tab用空格代替"></a>Tab用空格代替</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> expandtab   默认为8个空格代替Tab</span><br><span class="line">禁用：<span class="built_in">set</span> noexpandtab</span><br><span class="line">简写：<span class="built_in">set</span> et</span><br></pre></td></tr></table></figure>
<h4 id="Tab用指定空格的个数代替"><a href="#Tab用指定空格的个数代替" class="headerlink" title="Tab用指定空格的个数代替"></a>Tab用指定空格的个数代替</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> tabstop=<span class="comment"># 指定#个空格代替Tab</span></span><br><span class="line">简写：<span class="built_in">set</span> ts=4</span><br></pre></td></tr></table></figure>

<h4 id="设置缩进宽度"><a href="#设置缩进宽度" class="headerlink" title="设置缩进宽度"></a>设置缩进宽度</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#向右缩进 命令模式&gt;&gt;</span></span><br><span class="line"><span class="comment">#向左缩进 命令模式&lt;&lt;</span></span><br><span class="line"><span class="comment">#设置缩进为4个字符</span></span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br></pre></td></tr></table></figure>

<h5 id="设置文本宽度"><a href="#设置文本宽度" class="headerlink" title="设置文本宽度"></a>设置文本宽度</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> textwidth=65 (vim only) <span class="comment">#从左向右计数</span></span><br><span class="line"><span class="built_in">set</span> wrapmargin=15           <span class="comment">#从右到左计数</span></span><br></pre></td></tr></table></figure>

<h4 id="设置光标所在行的标识线"><a href="#设置光标所在行的标识线" class="headerlink" title="设置光标所在行的标识线"></a>设置光标所在行的标识线</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用：<span class="built_in">set</span> cursorline，简写 <span class="built_in">set</span> cul</span><br><span class="line">禁用：<span class="built_in">set</span> nocursorline</span><br></pre></td></tr></table></figure>

<h4 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启用： <span class="built_in">set</span> key=password</span><br><span class="line">禁用： <span class="built_in">set</span> key=</span><br></pre></td></tr></table></figure>

<h4 id="单词间跳转"><a href="#单词间跳转" class="headerlink" title="单词间跳转"></a>单词间跳转</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">w：下一个单词的词首</span><br><span class="line">e：当前或下一单词的词尾</span><br><span class="line">b：当前或前一个单词的词首</span><br><span class="line"><span class="string">&#x27;#&#x27;</span>COMMAND：由<span class="comment">#指定一次跳转的单词数</span></span><br></pre></td></tr></table></figure>

<h4 id="当前页跳转"><a href="#当前页跳转" class="headerlink" title="当前页跳转"></a>当前页跳转</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">H：页首     </span><br><span class="line">M：页中间行     </span><br><span class="line">L：页底</span><br><span class="line">zt：将光标所在当前行移到屏幕顶端</span><br><span class="line">zz：将光标所在当前行移到屏幕中间</span><br><span class="line">zb：将光标所在当前行移到屏幕底端</span><br></pre></td></tr></table></figure>

<h4 id="行首行尾跳转"><a href="#行首行尾跳转" class="headerlink" title="行首行尾跳转"></a>行首行尾跳转</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">^ 跳转至行首的第一个非空白字符</span><br><span class="line">0 跳转至行首</span><br><span class="line">\$ 跳转至行尾</span><br></pre></td></tr></table></figure>

<h4 id="行间移动"><a href="#行间移动" class="headerlink" title="行间移动"></a>行间移动</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;#&#x27;</span>G 或者扩展命令模式下 </span><br><span class="line">:<span class="string">&#x27;#&#x27;</span>   跳转至由第<span class="string">&#x27;#&#x27;</span>行</span><br><span class="line">G 最后一行</span><br><span class="line">1G, gg 第一行</span><br></pre></td></tr></table></figure>

<h4 id="翻页"><a href="#翻页" class="headerlink" title="翻页"></a>翻页</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+f 向文件尾部翻一屏,相当于Pagedown</span><br><span class="line">Ctrl+b 向文件首部翻一屏,相当于Pageup</span><br><span class="line">Ctrl+d 向文件尾部翻半屏</span><br><span class="line">Ctrl+u 向文件首部翻半屏</span><br></pre></td></tr></table></figure>

<h4 id="字符编辑"><a href="#字符编辑" class="headerlink" title="字符编辑"></a>字符编辑</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x 剪切光标处的字符</span><br><span class="line"><span class="string">&#x27;#&#x27;</span>x 剪切光标处起始的<span class="comment">#个字符</span></span><br><span class="line">xp 交换光标所在处的字符及其后面字符的位置</span><br><span class="line">~ 转换大小写</span><br><span class="line">J 删除当前行后的换行符</span><br></pre></td></tr></table></figure>

<h4 id="替换命令"><a href="#替换命令" class="headerlink" title="替换命令"></a>替换命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">r 只替换光标所在处的一个字符</span><br><span class="line">R 切换成REPLACE模式（在末行出现-- REPLACE -- 提示）,按ESC回到命令模式</span><br><span class="line">:%s/1/2/g 将所有的1替换为2</span><br></pre></td></tr></table></figure>

<h4 id="删除命令"><a href="#删除命令" class="headerlink" title="删除命令"></a>删除命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">d 删除命令，可结合光标跳转字符，实现范围删除</span><br><span class="line">d$ 删除到行尾</span><br><span class="line">d^ 删除到非空行首</span><br><span class="line">d0 删除到行首</span><br><span class="line">dw</span><br><span class="line">de</span><br><span class="line">db</span><br><span class="line"><span class="string">&#x27;#&#x27;</span>COMMAND</span><br><span class="line"><span class="built_in">dd</span>：   剪切光标所在的行</span><br><span class="line"><span class="string">&#x27;#&#x27;</span><span class="built_in">dd</span> 多行删除</span><br><span class="line">D：从当前光标位置一直删除到行尾，等同于d$</span><br></pre></td></tr></table></figure>

<h4 id="复制命令"><a href="#复制命令" class="headerlink" title="复制命令"></a>复制命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">y 复制，行为相似于d命令</span><br><span class="line">y$</span><br><span class="line">y0</span><br><span class="line">y^</span><br><span class="line">ye</span><br><span class="line">yw</span><br><span class="line">yb</span><br><span class="line"><span class="string">&#x27;#&#x27;</span>COMMAND</span><br><span class="line">yy：复制行</span><br><span class="line"><span class="string">&#x27;#&#x27;</span>yy 复制多行</span><br><span class="line">Y：复制整行</span><br></pre></td></tr></table></figure>

<h4 id="粘贴命令"><a href="#粘贴命令" class="headerlink" title="粘贴命令"></a>粘贴命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p 缓冲区存的如果为整行，则粘贴当前光标所在行的下方；否则，则粘贴至当前光标所在处的后面</span><br><span class="line">P 缓冲区存的如果为整行，则粘贴当前光标所在行的上方；否则，则粘贴至当前光标所在处的前面</span><br></pre></td></tr></table></figure>

<h4 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/PATTERN：从当前光标所在处向文件尾部查找</span><br><span class="line">?PATTERN：从当前光标所在处向文件首部查找</span><br><span class="line">n：与命令同方向</span><br><span class="line">N：与命令反方向</span><br></pre></td></tr></table></figure>

<h4 id="撤销更改"><a href="#撤销更改" class="headerlink" title="撤销更改"></a>撤销更改</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">u 撤销最近的更改，相当于windows中ctrl+z</span><br><span class="line"><span class="string">&#x27;#&#x27;</span>u 撤销之前多次更改</span><br><span class="line">U 撤消光标落在这行后所有此行的更改</span><br><span class="line">Ctrl-r 重做最后的“撤消”更改，相当于windows中crtl+y</span><br><span class="line">. 重复前一个操作</span><br><span class="line"><span class="string">&#x27;#&#x27;</span>. 重复前一个操作<span class="string">&#x27;#&#x27;</span>次</span><br></pre></td></tr></table></figure>

<h4 id="多文件模式"><a href="#多文件模式" class="headerlink" title="多文件模式"></a>多文件模式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim FILE1 FILE2 FILE3 ...</span><br><span class="line">:next 下一个</span><br><span class="line">:prev 前一个</span><br><span class="line">:first 第一个</span><br><span class="line">:last 最后一个</span><br><span class="line">:wall 保存所有</span><br><span class="line">:qall 不保存退出所有</span><br><span class="line">:wqall保存退出所有</span><br></pre></td></tr></table></figure>

<h4 id="多文件分割"><a href="#多文件分割" class="headerlink" title="多文件分割"></a>多文件分割</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim -o|-O FILE1 FILE2 ...</span><br><span class="line">-o: 水平或上下分割</span><br><span class="line">-O: 垂直或左右分割（vim only）</span><br><span class="line">在窗口间切换：Ctrl+w, Arrow</span><br></pre></td></tr></table></figure>

<h4 id="单文件窗口分割"><a href="#单文件窗口分割" class="headerlink" title="单文件窗口分割"></a>单文件窗口分割</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+w,s：<span class="built_in">split</span>, 水平分割，上下分屏</span><br><span class="line">Ctrl+w,v：vertical, 垂直分割，左右分屏</span><br><span class="line">ctrl+w,q：取消相邻窗口</span><br><span class="line">ctrl+w,o：取消全部窗口</span><br><span class="line">:wqall 退出</span><br></pre></td></tr></table></figure>

<div align=center><img src="vim-keymap.png"></div>

<h3 id="文本查看"><a href="#文本查看" class="headerlink" title="文本查看"></a>文本查看</h3><h4 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h4><ul>
<li>-E：显示行结束符$</li>
<li>-A：显示所有控制符</li>
<li>-n：对显示出的每一行进行编号</li>
<li>-b：非空行编号</li>
<li>-s：压缩连续的空行成一行<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> -n <span class="built_in">test</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="head"><a href="#head" class="headerlink" title="head"></a>head</h4><ul>
<li>-c # 指定获取前#字节</li>
<li>-n # 指定获取前#行,#如果为负数,表示从文件头取到倒数第#前</li>
<li>-# 同上<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">head</span> -n -3 <span class="built_in">test</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h4><ul>
<li>-c # 指定获取后#字节</li>
<li>-n # 指定获取后#行,如果#是负数,表示从第#行开始到文件结束</li>
<li>-# 同上</li>
<li>-f 跟踪显示文件fd新追加的内容,常用日志监控，相当于 –follow&#x3D;descriptor,当文件删除再新建同名文件,将无法继续跟踪文件</li>
<li>-F 跟踪文件名，相当于–follow&#x3D;name –retry，当文件删除再新建同名文件,将可以继续跟踪文件<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -10 <span class="built_in">test</span></span><br><span class="line"><span class="built_in">tail</span> -f nginx.log</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="more-less"><a href="#more-less" class="headerlink" title="more less"></a>more less</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># more可以实现分页查看文件</span></span><br><span class="line">more <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># less也可以实现分页查看文件，但是它有搜索功能，和vim类似，比较好用</span></span><br><span class="line"><span class="built_in">cat</span> <span class="built_in">test</span> | less</span><br></pre></td></tr></table></figure>

<h3 id="文本分割合并"><a href="#文本分割合并" class="headerlink" title="文本分割合并"></a>文本分割合并</h3><h4 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h4><ul>
<li>-d DELIMITER: 指明分隔符，默认tab</li>
<li>-f FILEDS:<ul>
<li>#: 第#个字段,例如:3</li>
<li>#,#[,#]：离散的多个字段，例如:1,3,6</li>
<li>#-#：连续的多个字段, 例如:1-6</li>
<li>混合使用：1-3,7</li>
</ul>
</li>
<li>-c 按字符切割</li>
<li>–output-delimiter&#x3D;STRING指定输出分隔符<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> a-b-c-d | cud -d- -f1,3</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="paste"><a href="#paste" class="headerlink" title="paste"></a>paste</h4><ul>
<li>-d  #分隔符：指定分隔符，默认用TAB</li>
<li>-s  #所有行合成一行显示<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">paste</span> -d: alpha.log seq.log</span><br><span class="line"><span class="built_in">paste</span> -s -d: title.txt emp.txt</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="分析文本"><a href="#分析文本" class="headerlink" title="分析文本"></a>分析文本</h3><h4 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h4><ul>
<li>-l 只计数行数</li>
<li>-w 只计数单词总数</li>
<li>-c 只计数字节总数</li>
<li>-m 只计数字符总数</li>
<li>-L 显示文件中最长行的长度<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> -l <span class="built_in">test</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><ul>
<li>-r 执行反方向（由上至下）整理</li>
<li>-R 随机排序</li>
<li>-n 执行按数字大小整理</li>
<li>-h 人类可读排序,如: 2K 1G </li>
<li>-f 选项忽略（fold）字符串中的字符大小写</li>
<li>-u 选项（独特，unique），合并重复项，即去重</li>
<li>-t , 选项使用,做为字段界定符</li>
<li>-k# 选项按照使用,字符分隔的 # 列来整理能够使用多次<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> -t, -k2 -nr tmp </span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h4><ul>
<li>-c: 显示每行重复出现的次数</li>
<li>-d: 仅显示重复过的行</li>
<li>-u: 仅显示不曾重复的行<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uniq</span> -c tmp2 | <span class="built_in">sort</span> -t<span class="string">&#x27; &#x27;</span> -k1 -nr | <span class="built_in">tr</span> -s <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;,&#x27;</span> | <span class="built_in">cut</span> -d, -f3  <span class="comment"># 一列字母按出现次数降序</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="diff-patch"><a href="#diff-patch" class="headerlink" title="diff patch"></a>diff patch</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># diff比较两个文件之间的差别</span></span><br><span class="line"><span class="comment"># -u 选项来输出“统一的（unified）”diff格式文件</span></span><br><span class="line">diff -u f1.txt f2.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># patch复制在其它文件中进行的改变</span></span><br><span class="line"><span class="comment"># -b 选项来自动备份改变了的文件</span></span><br><span class="line">diff -u foo.conf foo2.conf &gt; foo.patch </span><br><span class="line">patch -b foo.conf foo.patch</span><br><span class="line"></span><br><span class="line"><span class="comment"># vimdiff，相当于vim -d，在vim中比较两个文件的差别</span></span><br><span class="line">vimdiff f1.txt f2.txt  </span><br></pre></td></tr></table></figure>

<h3 id="文本模式匹配grep"><a href="#文本模式匹配grep" class="headerlink" title="文本模式匹配grep"></a>文本模式匹配grep</h3><p>grep [OPTIONS] PATTERN [FILE…]</p>
<ul>
<li>-color&#x3D;auto 对匹配到的文本着色显示</li>
<li>-m  # 匹配#次后停止</li>
<li>-v 显示不被pattern匹配到的行,即取反</li>
<li>-i 忽略字符大小写</li>
<li>-n 显示匹配的行号</li>
<li>-c 统计匹配的行数</li>
<li>-o 仅显示匹配到的字符串</li>
<li>-q 静默模式，不输出任何信息</li>
<li>-A # after, 后#行</li>
<li>-B # before, 前#行</li>
<li>-C # context, 前后各#行</li>
<li>-e 实现多个选项间的逻辑or关系,如：grep –e ‘cat ‘ -e ‘dog’ file</li>
<li>-w 匹配整个单词</li>
<li>-E 使用ERE，相当于egrep</li>
<li>-F 不支持正则表达式，相当于fgrep</li>
<li>-f file 根据模式文件处理</li>
<li>-r   递归目录，但不处理软链接</li>
<li>-R   递归目录，但处理软链接<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -f /data/f1.txt /data/f2.txt  <span class="comment"># 返回两个文件相同的部分</span></span><br><span class="line">ifconfig eth0 | grep -Eo <span class="string">&#x27;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&#x27;</span>|<span class="built_in">head</span> -1  <span class="comment"># 返回rth0网卡的IP地址</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="行编辑器sed"><a href="#行编辑器sed" class="headerlink" title="行编辑器sed"></a>行编辑器sed</h3><p>sed 即 Stream EDitor，和 vi 不同，sed是行编辑器。Sed是从文件或管道中读取一行，处理一行，输出一行；直到最后一行。每当处理一行时，把当前处理的行存储在临时缓冲区中，称为模式空间（Pattern Space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。一次处理一行的设计模式使得sed性能很高，相比vim一次性将文件加载到内存效率更高。</p>
<p><code>sed [option]... &#39;script;script;...&#39; [inputfile...]</code>，sed [可选参数] ‘位置 命令’ 输入文件</p>
<h4 id="option"><a href="#option" class="headerlink" title="option"></a>option</h4><ul>
<li>-n 不输出模式空间内容到屏幕，即不自动打印</li>
<li>-e 多点编辑</li>
<li>-f FILE 从指定文件中读取编辑脚本</li>
<li>-r, -E 使用扩展正则表达式</li>
<li>-i.bak 备份文件并原处编辑</li>
<li>-s           将多个文件视为独立文件，而不是单个连续的长文件流</li>
<li>#说明: </li>
<li>-ir 不支持</li>
<li>-i -r 支持</li>
<li>-ri   支持</li>
<li>-ni   会清空文件</li>
</ul>
<h4 id="script"><a href="#script" class="headerlink" title="script"></a>script</h4><p>script是地址，不指定地址则对全文进行处理</p>
<ul>
<li>单地址：<ul>
<li>#：指定的行，$：最后一行</li>
<li>&#x2F;pattern&#x2F;：被此处模式所能够匹配到的每一行</li>
</ul>
</li>
<li>地址范围：<ul>
<li>#,#     #从#行到第#行，3，6 从第3行到第6行</li>
<li>#,+#   #从#行到+#行，3,+4 表示从3行到第7行</li>
<li>&#x2F;pat1&#x2F;,&#x2F;pat2&#x2F;</li>
<li>#,&#x2F;pat&#x2F;</li>
<li>&#x2F;pat&#x2F;,#</li>
</ul>
</li>
<li>步进：~<ul>
<li>1~2 奇数行</li>
<li>2~2 偶数行</li>
</ul>
</li>
</ul>
<h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><ul>
<li>p 打印当前模式空间内容，追加到默认输出之后</li>
<li>Ip 忽略大小写输出</li>
<li>d 删除模式空间匹配的行，并立即启用下一轮循环</li>
<li>a [\]text 在指定行后面追加文本，支持使用\n实现多行追加</li>
<li>i [\]text 在行前面插入文本</li>
<li>c [\]text 替换行为单行或多行文本</li>
<li>w file 保存模式匹配的行至指定文件</li>
<li>r file 读取指定文件的文本至模式空间中匹配到的行后</li>
<li>&#x3D; 为模式空间中的行打印行号</li>
<li>! 模式空间中匹配行取反处理</li>
<li>q 结束或退出sed</li>
</ul>
<h4 id="查找替换"><a href="#查找替换" class="headerlink" title="查找替换"></a>查找替换</h4><ul>
<li>s&#x2F;pattern&#x2F;string&#x2F;修饰符 查找替换,支持使用其它分隔符，可以是其它形式：s@@@，s###</li>
<li>替换修饰符：</li>
<li>g 行内全局替换</li>
<li>p 显示替换成功的行</li>
<li>w   &#x2F;PATH&#x2F;FILE 将替换成功的行保存至文件中</li>
<li>I,i   忽略大小写</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> ab-cd | sed -n <span class="string">&#x27;s/-/,/gp&#x27;</span>  <span class="comment"># 替换并打印结果</span></span><br><span class="line">ifconfig eth0 | sed -n <span class="string">&#x27;2p&#x27;</span>  <span class="comment"># 打印网卡信息的第二行</span></span><br><span class="line">sed -n <span class="string">&#x27;$p&#x27;</span> /etc/passwd  <span class="comment"># 打印指定文件最后一行</span></span><br><span class="line">sed -n <span class="string">&quot;<span class="subst">$(echo $[`cat /etc/passwd|wc -l`-1])</span>p&quot;</span> /etc/passwd  <span class="comment"># 打印倒数第二行</span></span><br><span class="line">ifconfig eth0 |sed -n <span class="string">&#x27;/inet*/p&#x27;</span>  <span class="comment"># 打印匹配到的行</span></span><br><span class="line"><span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;3,+4p&#x27;</span>  <span class="comment"># 第三行到第七行</span></span><br><span class="line"><span class="built_in">seq</span> 10 | sed <span class="string">&#x27;2~2d&#x27;</span>  <span class="comment"># 删除偶数</span></span><br><span class="line">sed  <span class="string">&#x27;/^$/d&#x27;</span> <span class="built_in">test</span>  <span class="comment"># 删除空行</span></span><br><span class="line"><span class="built_in">seq</span> 10 | sed -e <span class="string">&#x27;2d&#x27;</span> -e <span class="string">&#x27;4d&#x27;</span>  <span class="comment"># 多点编辑，这样也可以：sed &#x27;2d;4d&#x27;</span></span><br><span class="line">sed <span class="string">&#x27;/^#/d;/^$/d&#x27;</span> <span class="built_in">test</span>  <span class="comment"># 不显示注释和空行，这样也可以：grep -Ev &#x27;^#|^$&#x27;</span></span><br><span class="line">sed -i.bak <span class="string">&#x27;2d;4d&#x27;</span> <span class="built_in">test</span>  <span class="comment"># 把原文件备份为test.bak并对原文件原地修改</span></span><br><span class="line"><span class="built_in">seq</span> 10 | sed <span class="string">&#x27;2,3a tea&#x27;</span>  <span class="comment"># 在指定的行后添加内容</span></span><br><span class="line"><span class="comment"># 提取IP地址的几种方法</span></span><br><span class="line">ifconfig eth0 | sed -n <span class="string">&#x27;2s/.*inet //g;s/ netmask.*//gp&#x27;</span></span><br><span class="line">ifconfig eth0 | sed -nr <span class="string">&quot;2s/[^0-9]+([0-9.]+).*/\1/p&quot;</span></span><br><span class="line">ifconfig eth0 | sed -rn <span class="string">&#x27;2s/(.*inet )([0-9].*)( netmask.*)/\2/p&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> a.b.c.gz |sed -En <span class="string">&#x27;s/(.*)\.([^.]+)$/\1/p&#x27;</span>  <span class="comment"># 取文件前缀</span></span><br><span class="line"><span class="built_in">echo</span> a.b.c.gz |sed -En <span class="string">&#x27;s/(.*)\.([^.]+)$/\2/p&#x27;</span>  <span class="comment"># 取文件后缀</span></span><br><span class="line"><span class="built_in">echo</span> /etc/sysconfig/ | sed -rn <span class="string">&#x27;s#(.*)/([^/]+)/?#\1#p&#x27;</span>  <span class="comment"># 取目录名</span></span><br><span class="line"><span class="built_in">echo</span> /etc/sysconfig/ | sed -rn <span class="string">&#x27;s#(.*)/([^/]+)/?#\2#p&#x27;</span>  <span class="comment"># 取基名</span></span><br></pre></td></tr></table></figure>

<h3 id="AWK文本处理"><a href="#AWK文本处理" class="headerlink" title="AWK文本处理"></a>AWK文本处理</h3><h4 id="awk工作过程"><a href="#awk工作过程" class="headerlink" title="awk工作过程"></a>awk工作过程</h4><ul>
<li>第一步：执行BEGIN{action;… }语句块中的语句</li>
<li>第二步：从文件或标准输入(stdin)读取一行，然后执行pattern{ action;… }语句块，它逐行扫描文件，从第一行到最后一行重复这个过程，直到文件全部被读取完毕。</li>
<li>第三步：当读至输入流末尾时，执行END{action;…}语句块BEGIN语句块在awk开始从输入流中读取行之前被执行，这是一个可选的语句块，比如变量初始化、打印输出表格的表头等语句通常可以写在BEGIN语句块中</li>
</ul>
<p>END语句块在awk从输入流中读取完所有的行之后即被执行，比如打印所有行的分析结果这类信息汇总都是在END语句块中完成，它也是一个可选语句块</p>
<p>pattern语句块中的通用命令是最重要的部分，也是可选的。如果没有提供pattern语句块，则默认执行{print}，即打印每一个读取到的行，awk读取的每一行都会执行该语句块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># awk [options]   &#x27;program&#x27; var=value   file…</span></span><br><span class="line"><span class="comment"># awk [options]   -f programfile    var=value file…</span></span><br></pre></td></tr></table></figure>

<h4 id="print"><a href="#print" class="headerlink" title="print"></a>print</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">seq</span> 10 | awk <span class="string">&#x27;&#123;print $1,&quot;hello&quot;&#125;&#x27;</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print $1&quot;\t&quot;$3&#125;&#x27;</span> /etc/passwd</span><br><span class="line">ifconfig eth0 | awk <span class="string">&#x27;/netmask/&#123;print $2&#125;&#x27;</span>  <span class="comment"># 查看ip，/pattern/是匹配pattern所在行</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1 www.baidu.com&quot;</span> | awk -F <span class="string">&quot;[ .]&quot;</span> <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>  <span class="comment"># 正则表达式分割</span></span><br></pre></td></tr></table></figure>

<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><p>内部变量</p>
<ul>
<li>FS：输入字段分隔符，默认为空白字符，相当于-F</li>
<li>OFS：输出字段分隔符，默认为空白字符</li>
<li>RS：输入记录分隔符，指定输入时的换行符</li>
<li>ORS：输出记录分隔符，使用指定字符代替输出换行符</li>
<li>NF：字段数量</li>
<li>NR：记录编号</li>
<li>FNR：各文件分别计数，记录的编号</li>
<li>FILENAME：当前文件名</li>
<li>ARGC：命令行参数的个数</li>
<li>ARGV：数组，保存的是命令行给定的各参数，每一个参数ARGV[0]….</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">awk -v FS=<span class="string">&#x27;:&#x27;</span> <span class="string">&#x27;&#123;print $1,FS,$3&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -F: -v OFS=<span class="string">&#x27;-&#x27;</span> <span class="string">&#x27;&#123;print $1,$3&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -v RS=<span class="string">&#x27; &#x27;</span> <span class="string">&#x27;&#123;print &#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -v RS=<span class="string">&#x27; &#x27;</span> -v ORS=<span class="string">&#x27;###&#x27;</span> <span class="string">&#x27;&#123;print $0&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print NF&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print $(NF-1)&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk <span class="string">&#x27;&#123;print NR,$0&#125;&#x27;</span> /etc/issue /etc/centos-release</span><br><span class="line">awk <span class="string">&#x27;&#123;print FNR,$0&#125;&#x27;</span> /etc/issue /etc/centos-release</span><br><span class="line">awk <span class="string">&#x27;&#123;print ARGC&#125;&#x27;</span> /etc/issue /etc/redhat-release</span><br><span class="line">awk <span class="string">&#x27;&#123;print ARGV[0]&#125;&#x27;</span> /etc/issue /etc/redhat-release</span><br></pre></td></tr></table></figure>

<p>自定义变量</p>
<p>可以使用v操作符也可以在代码块中直接定义</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk -v test1=test2=<span class="string">&quot;hello awk&quot;</span> <span class="string">&#x27;BEGIN&#123;print test1,test2&#125;&#x27;</span>  <span class="comment"># 注意赋值结果和在代码块中的结果不相同</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;test1=test2=&quot;hello awk&quot;;print test1,test2&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h4><p>printf “FORMAT”, item1, item2</p>
<ul>
<li>注意必须指定FORMAT；不会自动换行；FORMAT需要分别为后面每个item指定格式符号</li>
<li>%s：显示字符串</li>
<li>%d, %i：显示十进制整数</li>
<li>%f：显示为浮点数</li>
<li>%e, %E：显示科学计数法数值 </li>
<li>%c：显示字符的ASCII码</li>
<li>%g, %G：以科学计数法或浮点形式显示数值</li>
<li>%u：无符号整数</li>
<li>%%：显示%自身</li>
<li>#[.#] 第一个数字控制显示的宽度；第二个#表示小数点后精度，如：%3.1f</li>
<li><ul>
<li>左对齐（默认右对齐） 如：%-15s</li>
</ul>
</li>
<li><ul>
<li>显示数值的正负符号   如：%+d</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&#x27;&#123;printf &quot;%s\n&quot;,$1&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&#x27;&#123;printf &quot;%20s\n&quot;,$1&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&#x27;&#123;printf &quot;%-20s %10d\n&quot;,$1,$3&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&#x27;&#123;printf &quot;USERname: %-20s UID:%-10d\n&quot;,$1,$3&#125;&#x27;</span> /etc/passwd</span><br></pre></td></tr></table></figure>

<h4 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h4><p>算数操作符</p>
<p>x+y, x-y, x*y, x&#x2F;y, x^y, x%y；-x：转换为负数；+x：将字符串转换为数值</p>
<p>字符串操作</p>
<p>&#x3D;, +&#x3D;, -&#x3D;, *&#x3D;, &#x2F;&#x3D;, %&#x3D;, ^&#x3D;，++, –</p>
<p>比较操作符</p>
<p>&#x3D;&#x3D;, !&#x3D;, &gt;, &gt;&#x3D;, &lt;, &lt;&#x3D;</p>
<p>逻辑操作符</p>
<p>&amp;&amp; 与；|| 或；! 非</p>
<p>条件表达式</p>
<p>selector?if-true-expression:if-false-expression</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;BEGIN&#123;i=0;print i++,i&#125;&#x27;</span></span><br><span class="line"><span class="built_in">seq</span> 10 | awk <span class="string">&#x27;n++&#x27;</span></span><br><span class="line">awk -v n=0 <span class="string">&#x27;!n++&#123;print n&#125;&#x27;</span> /etc/passwd  <span class="comment"># 取n++的非</span></span><br><span class="line">awk <span class="string">&#x27;NR==2&#x27;</span> /etc/issue</span><br><span class="line">awk -F: <span class="string">&#x27;$3&gt;=1000&#x27;</span> /etc/passwd</span><br><span class="line"><span class="built_in">seq</span> 10 | awk <span class="string">&#x27;NR%2==0&#x27;</span>  <span class="comment"># 取奇偶行</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;print !i&#125;&#x27;</span></span><br><span class="line">awk -F: <span class="string">&#x27;$3&gt;=0 &amp;&amp; $3&lt;=1000 &#123;print $1,$3&#125;&#x27;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&#x27;&#123;$3&gt;=1000?usertype=&quot;Common User&quot;:usertype=&quot;SysUser&quot;;printf &quot;%-20s:%12s\n&quot;,$1,usertype&#125;&#x27;</span> /etc/passwd  <span class="comment"># 三目表达式</span></span><br></pre></td></tr></table></figure>

<h4 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h4><p>根据pattern条件过滤匹配的行再做处理</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;/^UUID/&#123;print $1&#125;&#x27;</span> /etc/fstab</span><br><span class="line"><span class="built_in">df</span> | awk <span class="string">&#x27;/^\/dev\//&#x27;</span>  <span class="comment"># 以/dev/开头的行</span></span><br><span class="line"><span class="built_in">seq</span> 10 | awk <span class="string">&#x27;1&#x27;</span>  <span class="comment"># 结果为非0值或非空字符串为真</span></span><br><span class="line"><span class="built_in">seq</span> 10 | awk <span class="string">&#x27;0&#x27;</span>  <span class="comment"># 结果为空字符串或0值为假</span></span><br><span class="line"><span class="built_in">seq</span> 10 | awk <span class="string">&#x27;NR&gt;=3 &amp;&amp; NR&lt;=6&#x27;</span>  <span class="comment"># 获取行范围</span></span><br><span class="line">awk -F: <span class="string">&#x27;BEGIN&#123;print &quot;USER USERID\n-----&quot;&#125; &#123;print $1&quot;:&quot;$3&#125; END&#123;print &quot;-----\nEND FILE&quot;&#125;&#x27;</span> /etc/passwd  <span class="comment"># BEGIN和END分别只在开始和结尾运行</span></span><br><span class="line">awk -F: <span class="string">&#x27;BEGIN&#123;printf &quot;--------------------------------\n%-20s|%10s|\n--------------------------------\n&quot;,&quot;username&quot;,&quot;uid&quot;&#125;&#123;printf &quot;%-20s|%10d|\n--------------------------------\n&quot;,$1,$3&#125;&#x27;</span> /etc/passwd</span><br></pre></td></tr></table></figure>

<h4 id="条件和循环"><a href="#条件和循环" class="headerlink" title="条件和循环"></a>条件和循环</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># if-else</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;if($3&lt;=100)&#123;print &quot;&lt;=100&quot;,$3&#125;else if ($3&lt;=1000) &#123;print &quot;&lt;=1000&quot;,$3&#125; else&#123;print &quot;&gt;=1000&quot;,$3&#125;&#125;&#x27;</span> /etc/passwd</span><br><span class="line"><span class="comment"># while循环</span></span><br><span class="line">awk -v n=0 -v <span class="built_in">sum</span>=0 <span class="string">&#x27;BEGIN&#123;while(n&lt;=100)&#123;sum+=n;n++&#125;;print sum&#125;&#x27;</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;sum=0;n=0;while(n&lt;=100)&#123;sum+=n;n++&#125;;print sum&#125;&#x27;</span></span><br><span class="line"><span class="comment"># do-while</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;sum=0;n=0;do&#123;sum+=n;n++&#125;while(n&lt;=100);print sum&#125;&#x27;</span></span><br><span class="line"><span class="comment"># for循环</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;sum=0;for(i=1;i&lt;=100;i++)&#123;sum+=i&#125;;print sum&#125;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> (( i=1,<span class="built_in">sum</span>=0;i&lt;=100;i++ ));<span class="keyword">do</span> <span class="built_in">let</span> <span class="built_in">sum</span>+=i;<span class="keyword">done</span>;<span class="built_in">echo</span> <span class="variable">$sum</span></span><br><span class="line"><span class="comment"># continue和break</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;for(i=1;i&lt;=100;i++)&#123;if(i==50)continue;sum+=i&#125;;print sum&#125;&#x27;</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;for(i=1;i&lt;=100;i++)&#123;if(i==50)break;sum+=i&#125;;print sum&#125;&#x27;</span></span><br><span class="line"><span class="comment"># next提前结束对本行的处理进入下一行处理</span></span><br><span class="line"><span class="built_in">seq</span> 10 | awk <span class="string">&#x27;&#123;if($1%2==1) next; print $1&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 判断数组元素是否存在</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;array[&quot;i&quot;]=&quot;x&quot;; array[&quot;j&quot;]=&quot;y&quot; ; print &quot;i&quot; in array, &quot;y&quot; in array &#125;&#x27;</span></span><br><span class="line"><span class="comment"># 遍历数组</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;weekdays[&quot;mon&quot;]=&quot;Monday&quot;;weekdays[&quot;tue&quot;]=&quot;Tuesday&quot;;for(i in weekdays)&#123;print i,weekdays[i]&#125;&#125;&#x27;</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;user[$1]=$3&#125;END&#123;for (i in user)&#123;printf &quot;%15s %10d\n&quot; &quot;User: &quot;,i,user[i] /etc/passwd</span></span><br></pre></td></tr></table></figure>

<h4 id="awk函数"><a href="#awk函数" class="headerlink" title="awk函数"></a>awk函数</h4><p>内置函数</p>
<ul>
<li>rand() 返回0和1之间一个随机数</li>
<li>srand() 配合rand()函数生成随机数的种子</li>
<li>int() 返回整数</li>
<li>length([s]) 返回指定字符串的长度</li>
<li>sub(r,s,[t]) 对t字符串搜索r表示模式匹配的内容，并将第一个匹配内容替换为s</li>
<li>gsub(r,s,[t]) 对t字符串搜索r表示模式匹配的内容，并将所有的匹配内容替换为s</li>
<li>split(s,array,[r]) 以r为分隔符切割字符串s，并将结果保存到array数组中</li>
<li>system(‘cmd’) 调用shell命令</li>
<li>systime() 10位时间戳</li>
<li>strftime() 指定时间格式</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;BEGIN&#123;srand(); for(i=1;i&lt;=10;i++)&#123;print int(rand()*100)&#125;&#125;&#x27;</span>  <span class="comment"># 10个0-100随机数</span></span><br><span class="line"><span class="built_in">cut</span> -d: -f1 /etc/passwd | awk <span class="string">&#x27;&#123;print length()&#125;&#x27;</span>  <span class="comment"># 返回字符串长度</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123;print length($1)&#125;&#x27;</span> /etc/passwd</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2008:08:08 08:08:08&quot;</span> | awk <span class="string">&#x27;sub(/:/,&quot;-&quot;,$1)&#x27;</span>  <span class="comment"># 替换第一个</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2008:08:08 08:08:08&quot;</span> | awk <span class="string">&#x27;gsub(/:/,&quot;-&quot;,$0)&#x27;</span>  <span class="comment"># 替换所有</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;system(&quot;pwd&quot;)&#125;&#x27;</span>  <span class="comment"># 执行命令</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;print systime()&#125;&#x27;</span>  <span class="comment"># 10位时间戳</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;print strftime(&quot;%Y-%m-%d %H:%M%S&quot;)&#125;&#x27;</span>  <span class="comment"># 当前时间格式化</span></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;print strftime(&quot;%Y-%m-%d %H:%M%S&quot;, systime()-3600)&#125;&#x27;</span>  <span class="comment"># 指定时间戳格式化</span></span><br></pre></td></tr></table></figure>

<p>自定义函数</p>
<p>将程序写为脚本，通过-f参数直接使用，通过-v传递参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; func.awk </span></span><br><span class="line"><span class="string">function max(x,y) &#123;</span></span><br><span class="line"><span class="string">    x&gt;y?var=x:var=y</span></span><br><span class="line"><span class="string">    return var</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">BEGIN&#123;print max(a,b)&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">awk -v a=30 -v b=20 -f func.awk </span><br></pre></td></tr></table></figure>

<h2 id="软件包管理"><a href="#软件包管理" class="headerlink" title="软件包管理"></a>软件包管理</h2><p>主流的软件包管理器：</p>
<ul>
<li>redhat：rpm文件, rpm 包管理器，rpm：Redhat Package Manager，RPM Package Manager </li>
<li>debian：deb文件, dpkg 包管理器</li>
</ul>
<h3 id="包的依赖"><a href="#包的依赖" class="headerlink" title="包的依赖"></a>包的依赖</h3><p>软件包之间可能存在依赖关系，甚至循环依赖，即：A包依赖B包，B包依赖C包，C包依赖A包安装软件包时，会因为缺少依赖的包，而导致安装包失败。</p>
<p>解决依赖包管理工具：</p>
<ul>
<li>yum：rpm包管理器的前端工具</li>
<li>dnf：Fedora 18+ rpm包管理器前端管理工具，CentOS 8 版代替 yum</li>
<li>apt：deb包管理器前端工具</li>
<li>zypper：suse上的rpm前端管理工具</li>
</ul>
<h3 id="获取程序包"><a href="#获取程序包" class="headerlink" title="获取程序包"></a>获取程序包</h3><p>官方网站</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CentOS镜像：</span><br><span class="line">https://www.centos.org/download/</span><br><span class="line">Ubuntu镜像：</span><br><span class="line">http://cdimage.ubuntu.com/releases/</span><br><span class="line">http://releases.ubuntu.com</span><br></pre></td></tr></table></figure>

<p>软件项目官方网站点</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://yum.mariadb.org/10.4/centos8-amd64/rpms/</span><br><span class="line">http://repo.mysql.com/yum/mysql-8.0-community/el/8/x86_64/</span><br></pre></td></tr></table></figure>

<p>搜索引擎</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://pkgs.org</span><br><span class="line">http://rpmfind.net</span><br><span class="line">http://rpm.pbone.net</span><br><span class="line">https://sourceforge.net/</span><br></pre></td></tr></table></figure>

<h3 id="RPM包管理"><a href="#RPM包管理" class="headerlink" title="RPM包管理"></a>RPM包管理</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>rpm {-i|–install} [install-options] PACKAGE_FILE… </p>
<ul>
<li>-v –verbose</li>
<li>-h 以#显示程序包管理执行进度</li>
<li>–test: 测试安装，但不真正执行安装，即dry run模式</li>
<li>–nodeps：忽略依赖关系</li>
<li>–replacepkgs | replacefiles</li>
<li>–nosignature: 不检查来源合法性</li>
<li>–nodigest：不检查包完整性</li>
<li>–noscripts：不执行程序包脚本<ul>
<li>%pre: 安装前脚本 –nopre</li>
<li>%post: 安装后脚本 –nopost</li>
<li>%preun: 卸载前脚本 –nopreun</li>
<li>%postun: 卸载后脚本 –nopostun<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh PACKAGE_FILE...</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="升级和降级"><a href="#升级和降级" class="headerlink" title="升级和降级"></a>升级和降级</h4><p>rpm {-U|–upgrade} [install-options] PACKAGE_FILE…</p>
<p>rpm {-F|–freshen} [install-options] PACKAGE_FILE…</p>
<p>upgrade：安装有旧版程序包，则”升级”，如果不存在旧版程序包，则”安装”</p>
<p>freshen：安装有旧版程序包，则”升级”， 如果不存在旧版程序包，则不执行升级操作</p>
<p>–oldpackage：降级</p>
<p>–force: 强制安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh PACKAGE_FILE ...</span><br><span class="line">rpm -Fvh PACKAGE_FILE ...</span><br></pre></td></tr></table></figure>

<h4 id="包查询"><a href="#包查询" class="headerlink" title="包查询"></a>包查询</h4><p>rpm {-q|–query} [select-options] [query-options]</p>
<p>[select-options]</p>
<ul>
<li>-a：所有包</li>
<li>-f：查看指定的文件由哪个程序包安装生成</li>
<li>-p rpmfile：针对尚未安装的程序包文件做查询操作<br>[query-options]</li>
<li>–changelog：查询rpm包的changelog</li>
<li>-c：查询程序的配置文件</li>
<li>-d：查询程序的文档</li>
<li>-i：information</li>
<li>-l：查看指定的程序包安装后生成的所有文件</li>
<li>–scripts：程序包自带的脚本</li>
<li>–whatprovides CAPABILITY：查询指定的CAPABILITY由哪个包所提供</li>
<li>–whatrequires CAPABILITY：查询指定的CAPABILITY被哪个包所依赖</li>
<li>–provides：列出指定程序包所提供的CAPABILITY</li>
<li>-R：查询指定的程序包所依赖的CAPABILITY</li>
</ul>
<h4 id="包卸载"><a href="#包卸载" class="headerlink" title="包卸载"></a>包卸载</h4><p>rpm {-e|–erase} [–allmatches] [–nodeps] [–noscripts] [–notriggers] [–test] PACKAGE_NAME …</p>
<h3 id="yum和dnf"><a href="#yum和dnf" class="headerlink" title="yum和dnf"></a>yum和dnf</h3><p>yum&#x2F;dnf是基于C&#x2F;S模式，yum服务端存放rpm包和相关包的元数据，yum客户端访问服务端进行安装或查询</p>
<h4 id="yum配置文件"><a href="#yum配置文件" class="headerlink" title="yum配置文件"></a>yum配置文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/yum.conf <span class="comment">#为所有仓库提供公共配置</span></span><br><span class="line">/etc/yum.repos.d/*.repo： <span class="comment">#为每个仓库的提供配置文件</span></span><br></pre></td></tr></table></figure>

<p>yum配置文件定义</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[repositoryID]</span><br><span class="line">name=Some name for this repository</span><br><span class="line">baseurl=url://path/to/repository/  # file://, http://, https://, ftp://</span><br><span class="line">enabled=&#123;1|0&#125;</span><br><span class="line">gpgcheck=&#123;1|0&#125;  # 安装包前要做包的合法和完整性校验</span><br><span class="line">gpgkey=URL</span><br><span class="line">enablegroups=&#123;1|0&#125;</span><br><span class="line">failovermethod=&#123;roundrobin|priority&#125;</span><br><span class="line"> roundrobin：意为随机挑选，默认值</span><br><span class="line"> priority:按顺序访问</span><br><span class="line">cost= 默认为1000</span><br></pre></td></tr></table></figure>

<p>yum的repo配置文件中可用的变量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$releasever</span>  <span class="comment"># 当前OS的发行版的主版本号，如：8，7，6</span></span><br><span class="line"><span class="variable">$arch</span>  <span class="comment"># CPU架构，如：aarch64, i586, i686，x86_64等</span></span><br><span class="line"><span class="variable">$basearch</span>  <span class="comment"># 系统基础平台；i386, x86_64</span></span><br><span class="line"><span class="variable">$contentdir</span>  <span class="comment"># 表示目录，比如：centos-8，centos-7</span></span><br><span class="line"><span class="variable">$YUM0</span>-<span class="variable">$YUM9</span>  <span class="comment"># 自定义变量</span></span><br></pre></td></tr></table></figure>

<p>阿里云提供了写好的CentOS和ubuntu的仓库文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://mirrors.aliyun.com/repo/</span><br></pre></td></tr></table></figure>

<p>常用国内yum源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CentOS系统的yum源</span></span><br><span class="line"><span class="comment">#阿里云</span></span><br><span class="line">https://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/</span><br><span class="line"><span class="comment">#腾讯云</span></span><br><span class="line">https://mirrors.cloud.tencent.com/centos/<span class="variable">$releasever</span>/</span><br><span class="line"><span class="comment">#华为云</span></span><br><span class="line">https://repo.huaweicloud.com/centos/<span class="variable">$releasever</span>/</span><br><span class="line"><span class="comment">#清华大学</span></span><br><span class="line">https://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/</span><br><span class="line"></span><br><span class="line"><span class="comment"># EPEL的yum源</span></span><br><span class="line"><span class="comment">#阿里云</span></span><br><span class="line">https://mirrors.aliyun.com/epel/<span class="variable">$releasever</span>/x86_64</span><br><span class="line"><span class="comment">#腾讯云</span></span><br><span class="line">https://mirrors.cloud.tencent.com/epel/<span class="variable">$releasever</span>/x86_64</span><br><span class="line"><span class="comment">#华为云</span></span><br><span class="line">https://mirrors.huaweicloud.com/epel/<span class="variable">$releasever</span>/x86_64</span><br><span class="line"><span class="comment">#清华大学</span></span><br><span class="line">https://mirrors.tuna.tsinghua.edu.cn/epel/<span class="variable">$releasever</span>/x86_64</span><br></pre></td></tr></table></figure>

<h4 id="yum-config-manager"><a href="#yum-config-manager" class="headerlink" title="yum-config-manager"></a>yum-config-manager</h4><p>可以生成yum仓库的配置文件及启用或禁用仓库，来自于yum-utils包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --add-repo <span class="string">&quot;URL或file&quot;</span>  <span class="comment"># 增加仓库</span></span><br><span class="line">yum-config-manager --<span class="built_in">disable</span> <span class="string">&quot;仓库名&quot;</span>  <span class="comment"># 禁用仓库</span></span><br><span class="line">yum-config-manager --<span class="built_in">enable</span>  <span class="string">&quot;仓库名&quot;</span>  <span class="comment"># 启用仓库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建仓库配置</span></span><br><span class="line">yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">yum-config-manager --add-repo /data/docker-ce.repo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用/禁用repo</span></span><br><span class="line">yum-config-manager --<span class="built_in">disable</span> extras</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> extras</span><br></pre></td></tr></table></figure>

<h4 id="yum命令"><a href="#yum命令" class="headerlink" title="yum命令"></a>yum命令</h4><p>yum [options] [command] [package …]</p>
<ul>
<li>-y 自动回答为”yes”</li>
<li>-q 静默模式</li>
<li>–nogpgcheck 禁止进行gpg check</li>
<li>–enablerepo&#x3D;repoidglob 临时启用此处指定的repo，支持通配符，如：”*”</li>
<li>–disablerepo&#x3D;repoidglob 临时禁用此处指定的repo,和上面语句同时使用，放在后面的生效</li>
</ul>
<p>显示仓库列表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum repolist</span><br><span class="line">yum repolist --disebaled  <span class="comment"># 查看已停用的仓库</span></span><br><span class="line">yum repolist -v  <span class="comment"># 显示仓库的详细信息</span></span><br></pre></td></tr></table></figure>

<p>显示程序包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum list  <span class="comment"># 查看所有程序包</span></span><br><span class="line">yum list mariadb-server  <span class="comment"># 显示制定的rpm包</span></span><br><span class="line">yum list exim*  <span class="comment"># 支持通配符</span></span><br><span class="line">yum list installed  <span class="comment"># 只显示已安装的包</span></span><br><span class="line">yum list available  <span class="comment"># 显示可安装的包</span></span><br><span class="line">yum list updates  <span class="comment"># 显示可以升级的包</span></span><br></pre></td></tr></table></figure>

<p>安装程序包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install package1 [package2] [...]</span><br><span class="line">yum reinstall package1 [package2] [...]  <span class="comment">#重新安装</span></span><br><span class="line">--downloadonly  <span class="comment">#只下载相关包默认至/var/cache/yum/x86_64/7/目录下,而不执行install/upgrade/erase </span></span><br><span class="line">--downloaddir=&lt;path&gt;, --destdir=&lt;path&gt;  <span class="comment">#--downloaddir选项来指定下载的目录,如果不存在自动创建</span></span><br><span class="line">yum -y install --downloadonly --downloaddir=/data/httpd httpd</span><br></pre></td></tr></table></figure>

<p>卸载程序包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove | erase package1 [package2] [...]</span><br></pre></td></tr></table></figure>

<p>升级和降级</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum upgrade|update [package1] [package2] [...]</span><br><span class="line">yum upgrade-minimal   <span class="comment">#最小化升级</span></span><br><span class="line">yum downgrade package1 [package2] [...]  <span class="comment"># 降级</span></span><br></pre></td></tr></table></figure>

<p>查询搜索</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum info mariadb-server  <span class="comment"># 查询程序包信息</span></span><br><span class="line">yum deplist mariadb-server  <span class="comment"># 查看依赖关系</span></span><br><span class="line">yum search mysql*  <span class="comment"># 模糊查询程序包</span></span><br></pre></td></tr></table></figure>

<p>仓库缓存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> -sh /var/cache/yum  <span class="comment"># 查看缓存大小，有时候可能是dnf</span></span><br><span class="line">yum makecache  <span class="comment"># 构建缓存</span></span><br><span class="line">yum clean all  <span class="comment"># 清除所有缓存</span></span><br></pre></td></tr></table></figure>

<p>yum日志</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CentOS 7以前版本日志</span></span><br><span class="line">/var/log/yum.log</span><br><span class="line"><span class="comment"># CentOS 8 版本日志</span></span><br><span class="line">/var/log/dnf.rpm.log</span><br><span class="line">/var/log/dnf.log</span><br><span class="line"></span><br><span class="line">yum <span class="built_in">history</span>  <span class="comment"># 查看历史命令</span></span><br><span class="line">yum <span class="built_in">history</span> info 22  <span class="comment"># 查看指定id的历史命令详细信息</span></span><br><span class="line">yum <span class="built_in">history</span> undo 22 -y  <span class="comment"># 撤销</span></span><br><span class="line">yum <span class="built_in">history</span> redo 22 -y  <span class="comment"># 重新运行</span></span><br></pre></td></tr></table></figure>

<h4 id="dnf"><a href="#dnf" class="headerlink" title="dnf"></a>dnf</h4><p>在 RHEL 8.0 版本正式取代了 YUM，DNF包管理器克服了YUM包管理器的一些瓶颈，提升了包括用户体验，内存占用，依赖分析，运行速度等。用法和yum基本相同</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置文件</span></span><br><span class="line">/etc/dnf/dnf.conf</span><br><span class="line"><span class="comment"># 仓库文件</span></span><br><span class="line">/etc/yum.repos.d/ *.repo</span><br><span class="line"><span class="comment"># 日志文件</span></span><br><span class="line">/var/log/dnf.rpm.log</span><br><span class="line">/var/log/dnf.log</span><br></pre></td></tr></table></figure>

<h2 id="程序包编译"><a href="#程序包编译" class="headerlink" title="程序包编译"></a>程序包编译</h2><h3 id="C语言编译过程"><a href="#C语言编译过程" class="headerlink" title="C语言编译过程"></a>C语言编译过程</h3><ul>
<li>.&#x2F;configure<ul>
<li>通过选项传递参数，指定安装路径、启用特性等；执行时会参考用户的指定以及Makefile.in文件生成Makefile</li>
<li>检查依赖到的外部环境，如依赖的软件包</li>
</ul>
</li>
<li>make 根据Makefile文件，会检测依赖的环境，进行构建应用程序</li>
<li>make install 复制文件到相应路径</li>
</ul>
<h3 id="编译安装准备"><a href="#编译安装准备" class="headerlink" title="编译安装准备"></a>编译安装准备</h3><ul>
<li>开发工具：make, gcc (c&#x2F;c++编译器GNU C Complier)</li>
<li>开发环境：开发库（glibc：标准库），头文件，可安装开发包组 Development Tools</li>
<li>软件相关依赖包</li>
</ul>
<p>建议安装相关包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc make autoconf gcc-c++ glibc glibc-devel pcre pcre-devel openssl openssl-devel systemd-devel zlib-devel  vim lrzsz tree tmux lsof tcpdump wget net-tools iotop bc bzip2 zip unzip nfs-utils man-pages</span><br></pre></td></tr></table></figure>

<h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><ol>
<li>运行 configure 脚本，生成 Makefile 文件。可以指定安装位置，指定启用的特性<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装路径设定</span></span><br><span class="line">--prefix=/PATH  <span class="comment"># 指定默认安装位置,默认为/usr/local/</span></span><br><span class="line">--sysconfdir=/PATH  <span class="comment"># 配置文件安装位置</span></span><br><span class="line"><span class="comment"># 软件特性和相关指定</span></span><br><span class="line">Optional Features: 可选特性</span><br><span class="line"> --disable-FEATURE</span><br><span class="line"> --enable-FEATURE[=ARG]</span><br><span class="line">Optional Packages: 可选包</span><br><span class="line"> --with-PACKAGE[=ARG] 依赖包</span><br><span class="line"> --without-PACKAGE 禁用依赖关系</span><br><span class="line"><span class="comment"># 注意：通常被编译操作依赖的程序包，需要安装此程序包的&quot;开发&quot;组件，其包名一般类似于name-devel-VERSION</span></span><br></pre></td></tr></table></figure></li>
<li>make</li>
<li>make install</li>
</ol>
<h3 id="编译安装httpd"><a href="#编译安装httpd" class="headerlink" title="编译安装httpd"></a>编译安装httpd</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装相关包</span></span><br><span class="line">dnf install gcc make autoconf apr-devel apr-util-devel pcre-devel openssl-devel redhat-rpm-config</span><br><span class="line"><span class="comment"># 下载并解压包</span></span><br><span class="line">wget https://mirror.bit.edu.cn/apache//httpd/httpd-2.4.46.tar.bz2</span><br><span class="line">tar xvf httpd-2.4.46.tar.bz2 -C /usr/local/src</span><br><span class="line"><span class="comment"># 配置</span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/src/httpd-2.4.43/</span><br><span class="line">./configure --prefix=/apps/httpd --sysconfdir=/etc/httpd --enable-ssl</span><br><span class="line"><span class="comment"># 编译安装</span></span><br><span class="line">make -j 4 &amp;&amp; make install </span><br><span class="line"><span class="comment"># 配置环境，也可以加入PATH或者软链接到/usr/bin</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;PATH=/apps/httpd/bin:$PATH&#x27;</span> &gt; /etc/profile.d/httpd.sh</span><br><span class="line">. /etc/profile.d/httpd.sh</span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">apachectl start</span><br></pre></td></tr></table></figure>

<h2 id="Ubuntu软件管理"><a href="#Ubuntu软件管理" class="headerlink" title="Ubuntu软件管理"></a>Ubuntu软件管理</h2><ul>
<li>dpkg：package manager for Debian，类似于rpm， dpkg是基于Debian的系统的包管理器。可以安装，删除和构建软件包，但无法自动下载和安装软件包或其依赖项</li>
<li>apt：Advanced Packaging Tool，功能强大的软件管理工具，甚至可升级整个Ubuntu的系统，基于客户&#x2F;服务器架构，类似于yum</li>
</ul>
<h3 id="dpkg包管理"><a href="#dpkg包管理" class="headerlink" title="dpkg包管理"></a>dpkg包管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装包</span></span><br><span class="line">dpkg -i package.deb </span><br><span class="line"><span class="comment">#删除包，不建议，不自动卸载依赖于它的包</span></span><br><span class="line">dpkg -r package </span><br><span class="line"><span class="comment">#删除包（包括配置文件）</span></span><br><span class="line">dpkg -P package </span><br><span class="line"><span class="comment">#列出当前已安装的包，类似rpm -qa</span></span><br><span class="line">dpkg -l</span><br><span class="line"><span class="comment">#显示该包的简要说明</span></span><br><span class="line">dpkg -l package </span><br><span class="line"><span class="comment">#列出该包的状态，包括详细信息，类似rpm –qi</span></span><br><span class="line">dpkg -s package </span><br><span class="line"><span class="comment">#列出该包中所包含的文件，类似rpm –ql </span></span><br><span class="line">dpkg -L package </span><br><span class="line"><span class="comment">#搜索包含pattern的包，类似rpm –qf </span></span><br><span class="line">dpkg -S &lt;pattern&gt; </span><br><span class="line"><span class="comment">#配置包，-a 使用，配置所有没有配置的软件包</span></span><br><span class="line">dpkg --configure package </span><br><span class="line"><span class="comment">#列出 deb 包的内容，类似rpm –qpl </span></span><br><span class="line">dpkg -c package.deb </span><br><span class="line"><span class="comment">#解开 deb 包的内容</span></span><br><span class="line">dpkg --unpack package.deb </span><br></pre></td></tr></table></figure>
<p>注意：一般建议不要使用dpkg卸载软件包。因为删除包时，其它依赖它的包不会卸载，并且可能无法再正常运行</p>
<h3 id="apt"><a href="#apt" class="headerlink" title="apt"></a>apt</h3><p>之前最常用的 Linux 包管理命令都被分散在了 apt-get、apt-cache 和 apt-config 这三条命令中。</p>
<p>Ubuntu 16.04 引入新特性之一便是 apt 命令，apt 命令解决了命令过于分散的问题，它包括 apt-get 命令出现以来使用最广泛的功能选项，以及 apt-cache 和 apt-config 命令中很少用到的功能。在使用apt 命令时，用户不必再由 apt-get 转到 apt-cache 或 apt-config，提供管理软件包所需的必要选项。</p>
<p>apt配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/apt/sources.list</span><br><span class="line">/etc/apt/sources.list.d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改为清华源</span></span><br><span class="line">sed -i <span class="string">&#x27;s/mirrors.aliyun.com/mirrors.tuna.tsinghua.edu.cn/&#x27;</span> /etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<p>常用命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装包：</span></span><br><span class="line">apt install tree zip</span><br><span class="line"><span class="comment">#安装图形桌面</span></span><br><span class="line">apt install ubuntu-desktop</span><br><span class="line"><span class="comment">#删除包：</span></span><br><span class="line">apt remove tree zip</span><br><span class="line"><span class="comment">#说明：apt remove中添加--purge选项会删除包配置文件，谨慎使用</span></span><br><span class="line"><span class="comment">#更新包索引，相当于yum clean all;yum makecache</span></span><br><span class="line">apt update  </span><br><span class="line"><span class="comment">#升级包：要升级系统，请首先更新软件包索引，再升级</span></span><br><span class="line">apt upgrade</span><br><span class="line"><span class="comment">#apt列出仓库软件包，等于yum list</span></span><br><span class="line">apt list</span><br><span class="line"><span class="comment">#搜索安装包</span></span><br><span class="line">apt search nginx</span><br><span class="line"><span class="comment">#查看某个安装包的详细信息</span></span><br><span class="line">apt show apache2 </span><br><span class="line"><span class="comment">#在线安装软件包</span></span><br><span class="line">apt install apache2 </span><br><span class="line"><span class="comment">#卸载单个软件包但是保留配置⽂件</span></span><br><span class="line">apt remove apache2 </span><br><span class="line"><span class="comment">#删除安装包并解决依赖关系</span></span><br><span class="line">apt autoremove apache2 </span><br><span class="line"><span class="comment">#更新本地软件包列表索引，修改了apt仓库后必须执⾏</span></span><br><span class="line">apt update </span><br><span class="line"><span class="comment">#卸载单个软件包删除配置⽂件</span></span><br><span class="line">apt purge apache2 </span><br><span class="line"><span class="comment">#升级所有已安装且可升级到新版本的软件包</span></span><br><span class="line">apt upgrade</span><br><span class="line"><span class="comment">#升级整个系统，必要时可以移除旧软件包。</span></span><br><span class="line">apt full-upgrade </span><br><span class="line"><span class="comment">#编辑source源⽂件</span></span><br><span class="line">apt edit-sources </span><br><span class="line"><span class="comment">#查看仓库中软件包有哪些版本可以安装</span></span><br><span class="line">apt-cache madison nginx </span><br><span class="line"><span class="comment">#安装软件包的时候指定安装具体的版本</span></span><br><span class="line">apt install nginx=1.14.0-0ubuntu1.6 </span><br><span class="line"><span class="comment">#查看文件来自于哪个包,类似redhat中的yum provides &lt;filename&gt;</span></span><br><span class="line">apt-file search <span class="string">&#x27;string&#x27;</span>  <span class="comment">#默认是包含此字符串的文件</span></span><br><span class="line">apt-file search -x  <span class="string">&#x27;正则表达式&#x27;</span></span><br><span class="line">apt-file search -F /path/file</span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">WangXun</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://wangxukun.top/2019/08/07/Language/Linux常用命令/">https://wangxukun.top/2019/08/07/Language/Linux常用命令/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/08/17/Language/Windows%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"><i class="fa fa-chevron-left">  </i><span>Windows常用命令</span></a></div><div class="next-post pull-right"><a href="/2019/08/07/Language/Linux%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"><span>Linux常见问题解决</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'aaf2844e0aeef4917c17',
  clientSecret: '10b96d24dffda7d3b4544778cf620f81990b676d',
  repo: 'blog-issue',
  owner: 'w749',
  admin: 'w749',
  id: md5(decodeURI(location.pathname)),
  language: 'en'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(/img/top-img.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2022 By WangXun</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script src="/js/search/algolia.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>